<!doctype html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¾çœ‰ ï½œ ç¾å­¸ - å°ˆæ¥­éœ§çœ‰å·¥ä½œå®¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      width: 100%;
      min-height: 100%;
    }

    .fade-in {
      animation: fadeIn 0.4s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(15px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .tab-button {
      transition: all 0.3s ease;
    }

    .tab-button:hover {
      transform: translateY(-2px);
    }

    .card {
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(199, 162, 144, 0.18);
    }

    /* ç¡®ä¿è”ç³»æŒ‰é’®ä½¿ç”¨æ·±è‰²èƒŒæ™¯å’Œåœ†è§’ */
    a[href*="instagram.com"],
    a[href*="lin.ee"] {
      background-color: #C7A290 !important;
      border-radius: 9999px !important;
    }

    .image-placeholder {
      background: linear-gradient(135deg, #F5EBE6 0%, #E8D5C8 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 200px;
      position: relative;
      overflow: hidden;
    }

    .image-placeholder::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.2) 0%, transparent 50%);
    }

    .scroll-container {
      scrollbar-width: none;
      /* éš±è— Firefox æ»‘æ¡¿ */
      -ms-overflow-style: none;
      /* éš±è— IE/Edge æ»‘æ¡¿ */
    }

    .scroll-container::-webkit-scrollbar {
      display: none;
      /* éš±è— Chrome/Safari æ»‘æ¡¿ */
    }

    /* å·¦å³æ¼¸è®Šé®ç½©ï¼Œæç¤ºå¯æ»‘å‹• - å›ºå®šåœ¨ segment å®¹å™¨é‚Šç·£ */
    .scroll-fade-left,
    .scroll-fade-right {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 40px;
      pointer-events: none;
      z-index: 10;
      transition: opacity 0.3s ease;
      border-radius: 24px;
    }

    .scroll-fade-left {
      left: 0;
      background: linear-gradient(to right, var(--fade-color, rgba(255, 255, 255, 0.95)), transparent);
    }

    .scroll-fade-right {
      right: 0;
      background: linear-gradient(to left, var(--fade-color, rgba(255, 255, 255, 0.95)), transparent);
    }

    .scroll-fade-left.hidden,
    .scroll-fade-right.hidden {
      opacity: 0;
    }

    /* æµ®å±¤æ¨£å¼ */
    .face-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
      backdrop-filter: blur(8px);
      animation: modalFadeIn 0.3s ease;
    }

    .face-modal.active {
      display: flex;
    }

    .face-modal-content {
      background: white;
      border-radius: 24px;
      max-width: 900px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: modalSlideUp 0.3s ease;
      scrollbar-width: thin;
      scrollbar-color: rgba(199, 162, 144, 0.3) transparent;
    }

    .face-modal-content::-webkit-scrollbar {
      width: 8px;
    }

    .face-modal-content::-webkit-scrollbar-track {
      background: transparent;
    }

    .face-modal-content::-webkit-scrollbar-thumb {
      background: rgba(199, 162, 144, 0.3);
      border-radius: 4px;
    }

    .face-modal-content::-webkit-scrollbar-thumb:hover {
      background: rgba(199, 162, 144, 0.5);
    }

    .face-modal-close {
      position: fixed;
      top: 16px;
      right: 16px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #5C4A42;
      font-size: 28px;
      font-weight: 300;
      transition: all 0.3s ease;
      z-index: 10001;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .face-modal-close:hover {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.1);
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.2);
    }

    .face-modal-close:active {
      transform: scale(0.95);
    }

    .face-card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      pointer-events: none;
    }

    .face-card-hint {
      background: rgba(199, 162, 144, 0.95);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .card:hover .face-card-overlay {
      background: rgba(0, 0, 0, 0.3);
    }

    .card:hover .face-card-hint {
      opacity: 1;
      transform: translateY(0);
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes modalSlideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .face-modal-content {
        max-height: 90vh;
        border-radius: 20px;
        margin: 0 12px;
      }

      .face-modal-close {
        top: 12px;
        right: 12px;
        width: 44px;
        height: 44px;
        font-size: 26px;
      }

      .face-card-hint {
        font-size: 12px;
        padding: 6px 14px;
      }

      .modal-body-content {
        padding: 24px 20px !important;
      }

      .modal-body-content h2 {
        font-size: 24px !important;
      }

      .modal-body-content .info-section {
        padding: 16px !important;
        margin-bottom: 16px !important;
      }

      .modal-body-content .info-section h4 {
        font-size: 15px !important;
      }

      .modal-body-content .info-section p {
        font-size: 14px !important;
      }
    }
  </style>
  <style>
    @view-transition {
      navigation: auto;
    }
  </style>
</head>

<body>
  <div id="app" class="w-full min-h-screen"></div>
  <script>
    const defaultConfig = {
      brand_name: "ç¾çœ‰ ï½œ ç¾å­¸",
      brand_tagline: "å°ˆæ¥­åŠæ°¸ä¹…éœ§çœ‰ Â·åŸç”Ÿæ„Ÿé¢¨æ ¼",
      instagram_handle: "beautybrow_studio",
      line_id: "@816winfr",
      background_color: "#FAF8F6",
      card_background: "#FFFFFF",
      primary_text: "#5C4A42",
      primary_action: "#C7A290",
      secondary_action: "#E8D5C8",
      font_family: "Noto Sans TC",
      font_size: 13.5
    };

    // ç›®å‰ tabï¼ˆå¯ç”±ç¶²å€ hash æŒ‡å®šï¼Œä¾‹å¦‚ï¼šindex.html#pricingï¼‰
    let currentTab = 'home';

    function isValidTabId(tabId) {
      return tabs.some(t => t.id === tabId);
    }

    function getTabFromUrl() {
      // æ”¯æ´å…©ç¨®æ ¼å¼ï¼š
      // 1) #pricing
      // 2) #tab=pricing
      const raw = (window.location.hash || '').replace(/^#/, '').trim();
      if (!raw) return null;
      if (raw.startsWith('tab=')) return raw.slice(4) || null;
      return raw;
    }

    function setUrlTab(tabId, { replace = false } = {}) {
      const url = new URL(window.location.href);
      url.hash = `#${tabId}`;
      if (replace) {
        window.history.replaceState(null, '', url.toString());
      } else {
        window.history.pushState(null, '', url.toString());
      }
    }

    const tabs = [
      { id: 'home', name: 'é¦–é ', icon: '' },
      { id: 'brow-guide', name: 'çœ‰å‹è¨­è¨ˆæŒ‡å—', icon: '' },
      { id: 'pricing', name: 'åƒ¹ç›®è¡¨', icon: '' },
      { id: 'booking', name: 'é ç´„é ˆçŸ¥', icon: '' },
      { id: 'preparation', name: 'æ–½ä½œå‰æº–å‚™', icon: '' },
      { id: 'aftercare', name: 'ç…§è­·é ˆçŸ¥', icon: '' },
      { id: 'location', name: 'æœå‹™åœ°é»', icon: '' },
      { id: 'faq-brow', name: 'éœ§çœ‰Q&A', icon: '' },
      { id: 'faq-removal', name: 'æ·¡è‰²Q&A', icon: '' }
    ];

    function copyAddress(text) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).catch(() => fallbackCopy(text));
      } else {
        fallbackCopy(text);
      }
    }

    function fallbackCopy(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
      } finally {
        document.body.removeChild(textarea);
      }
    }

    function renderHome(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      return `
        <div class="text-center mb-6 fade-in" style="margin-top: -1rem;">
          <div class="flex justify-center" style="margin-bottom: -2rem;">
            <img src="sources/logo.png" alt="${config.brand_name || defaultConfig.brand_name}" style="max-width: 200px; height: auto; object-fit: contain; background: transparent;">
          </div>
          <h1 class="mb-3" style="font-size: ${baseFont * 3}px; font-family: 'å¯ç•«æ›¸å¯«è¡Œæ¥·-ç¹', 'æ¨™æ¥·é«”', 'BiauKai', 'STKaiti', 'KaiTi', 'æ¥·é«”', 'Noto Serif TC', serif; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 300; letter-spacing: 4px;">
            ${config.brand_name || defaultConfig.brand_name}
          </h1>
          <p style="font-size: ${baseFont * 1.2}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.8; letter-spacing: 1px;">
            ${config.brand_tagline || defaultConfig.brand_tagline}
          </p>
        </div>

        <!-- çœ‰å‹è¨­è¨ˆç†å¿µ -->
        <div class="mb-8 fade-in">
          <div class="card p-8 rounded-3xl text-center" style="background: linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%); box-shadow: 0 4px 20px rgba(199, 162, 144, 0.15);">
            <p style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.85; max-width: 740px; margin: 0 auto; font-weight: 300;">
              æˆ‘çš„çœ‰å‹è¨­è¨ˆä¸æ˜¯è¿½æ±‚æµè¡Œ<br>æ˜¯ã€Œå®¢è£½åŒ–ç¾å­¸ã€<br><br>
              æˆ‘æ·±ä¿¡æœ€å®Œç¾çš„çœ‰æ¯›æ˜¯èˆ‡äº”å®˜ã€è‡‰å‹ã€çœ‰éª¨çµæ§‹ã€æ—¥å¸¸å¦æ„Ÿèˆ‡å€‹äººé¢¨æ ¼å®Œå…¨å’Œè«§çš„å­˜åœ¨<br><br>
              é‡èº«æ‰“é€ æœ€è‡ªç„¶ã€æœ€å”èª¿çš„çœ‰ï¼Œä¸è¿½æ±‚èª‡å¼µæ¿ƒåº¦ï¼Œåªå‘ˆç¾å‰›å‰›å¥½çš„ç²¾ç·»èˆ‡æŸ”å’Œ<br>
              è®“çœ‰æ¯›ä¸åªæ˜¯å¦å®¹çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯æå‡æ°£è³ªçš„ç´°ç¯€<br><br>
              å¸Œæœ›é€éç´°ç·»çš„è¨­è¨ˆèˆ‡æº«æŸ”çš„éœ§æ„Ÿï¼Œè®“ä½ æ¯å¤©ç…§é¡å­éƒ½æ›´å–œæ­¡è‡ªå·± âœ¨
            </p>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-7 mb-10">
          <div class="card p-8 rounded-3xl fade-in" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 20px rgba(199, 162, 144, 0.12);">
            <div class="text-center mb-1">
              <span style="font-size: ${baseFont * 3}px;"></span>
            </div>
            <h2 class="text-center mb-2" style="font-size: ${baseFont * 1.8}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
              éœ§çœ‰æœå‹™
            </h2>
            <p class="mb-6" style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.85; text-align: center;">
              æ¡ç”¨æœ€æ–°æŠ€è¡“ï¼Œæ‰“é€ è‡ªç„¶æŸ”éœ§å¦æ„Ÿ<br>è®“çœ‰å‹æ›´åŠ ç«‹é«”æœ‰ç¥
            </p>
            <div class="grid grid-cols-2 gap-3">
              ${['ç²¾ç·»éœ§æ„Ÿ', 'æŒä¹…ç©©å®š', 'å°ˆæ¥­è¨­è¨ˆ', 'å®¢è£½çœ‰å½¢'].map(feature => `
                <div class="p-4 rounded-2xl text-center" style="background: ${config.background_color || defaultConfig.background_color};">
                  <span style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text};">âœ“ ${feature}</span>
                </div>
              `).join('')}
            </div>
          </div>

          <div class="card p-8 rounded-3xl fade-in" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 20px rgba(199, 162, 144, 0.12);">
            <div class="text-center mb-1">
              <span style="font-size: ${baseFont * 3}px;"></span>
            </div>
            <h2 class="text-center mb-2" style="font-size: ${baseFont * 1.8}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
              æ·¡è‰²æœå‹™
            </h2>
            <p class="mb-6" style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.85; text-align: center;">
              æº«å’Œæœ‰æ•ˆçš„æ·¡è‰²æŠ€è¡“<br>é‡æ–°æ‰“é€ ç†æƒ³çœ‰å‹
            </p>
            <div class="grid grid-cols-2 gap-3">
              ${['æº«å’Œæ·¡è‰²', 'ç„¡ä¿®å¾©æœŸ', 'æ¼¸é€²æ·¡åŒ–', 'ä½æ•ç„¡è² æ“”'].map(feature => `
                <div class="p-4 rounded-2xl text-center" style="background: ${config.background_color || defaultConfig.background_color};">
                  <span style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text};">âœ“ ${feature}</span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>

        <div class="card p-8 rounded-3xl text-center fade-in mb-8" style="background: linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%); box-shadow: 0 4px 20px rgba(199, 162, 144, 0.15);">
          <h3 class="mb-4" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500;">
            âš ï¸ éœ§çœ‰é ç´„å‰ï½œé ˆçŸ¥è«‹è©³é–±
          </h3>
          <div class="max-w-3xl mx-auto" style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.9; opacity: 0.85;">
            <p class="mb-5">è‹¥æœ‰ä»¥ä¸‹ä»»ä¸€ç‹€æ³ï¼Œæš«ä¸å»ºè­°æ–½ä½œéœ§çœ‰ï¼š</p>
            <p style="line-height:2;">
              ğŸš« èŸ¹è¶³è…«ã€ç³–å°¿ç—…ã€é«˜è¡€å£“ã€å¿ƒè¡€ç®¡ç–¾ç—…ã€æ„›æ»‹ç—…ã€Bå‹è‚ç‚ã€å…ç–«åŠ›å¤±èª¿ã€æœç”¨æŠ—å‡è¡€è—¥ç‰©ã€ç²¾ç¥ç–¾ç—…ã€å‚³æŸ“æ€§ç–¾ç—…ã€åš´é‡ç•°ä½æ€§çš®è†šç‚ã€åš´é‡éæ•æ€§è†šæ³
            </p>
            <div class="mt-6 pt-6" style="border-top: 1px solid rgba(199, 162, 144, 0.2);">
              <p style="font-size: ${baseFont * 1.0}px; opacity: 0.75;">
                ğŸŒ¸ æ¯å€‹äººé¡´éª¨é«˜ä½ã€çœ‰å‹é•·çŸ­éƒ½ä¸åŒï¼Œå…©é‚Šçœ‰æ¯›ä¸æœƒã€Œå®Œå…¨å°ç¨±ã€æ˜¯è‡ªç„¶ç¾è±¡<br>
                è‹¥æ‚¨æ˜¯è¿½æ±‚æ¥µè‡´å®Œç¾çš„çœ‰å‹æ§ï¼Œå»ºè­°å†ä¸‰è€ƒæ…®å¾Œé ç´„å”·
              </p>
            </div>
          </div>
        </div>
      `;
    }

    function renderBrowGuide(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      return `
        <!-- çœ‰å‹è¨­è¨ˆæŒ‡å— -->
        <div class="mb-8 fade-in">
          <h3 class="mb-6 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; letter-spacing: 1px;">
            âœ¨ çœ‰å‹è¨­è¨ˆæŒ‡å—
          </h3>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
            ${[
              { 
                img: 'sources/éµè›‹è‡‰.jpg', 
                name: 'éµè›‹è‡‰', 
                color: '#E8D5C8',
                description: 'é€™æ˜¯æœ€æ¨™æº–çš„å®Œç¾è‡‰å‹ï¼<br>æ“æœ‰ä»¤äººç¨±ç¾¨çš„ 1:1.5 é»ƒé‡‘é•·å¯¬æ¯”ä¾‹é¡é ­èˆ‡ä¸‹å·´çš„æ¯”ä¾‹æ°åˆ°å¥½è™•ï¼Œç·šæ¢åœ“æ½¤æµæš¢ï¼Œæ²’æœ‰æ˜é¡¯çš„ç¨œè§’ï¼Œæ•´é«”è¼ªå»“æµæš¢çµ¦äººæº«æŸ”èˆ’æœçš„æ„Ÿè¦º',
                features: 'æ¨™æº–çœ‰ã€å¾®æŒ‘çœ‰ (å¹¾ä¹é©åˆæ‰€æœ‰çœ‰å‹)',
                eyebrowStyle: 'éµè›‹è‡‰æœ¬èº«å·²å…·å‚™å®Œç¾çš„å¹³è¡¡æ„Ÿï¼Œè¨­è¨ˆçš„æ ¸å¿ƒåœ¨æ–¼ã€Œè¥¯æ‰˜æ°£è³ªã€<br><br>â–«ï¸çœ‰å³°ï¼š å¾®ä¸Šæšä¸€é»ï¼Œè®“ç²¾ç¥çœ‹èµ·ä¾†æ›´å¥½<br>â–«ï¸çœ‰å°¾ï¼š é †é †åœ°å¾€ä¸‹ï¼Œé †å»¶çœ¼å‹å¼§åº¦',
                tips: 'éµè›‹è‡‰ä¸éœ€è¦é çœ‰æ¯›ä¾†ã€Œä¿®é£¾ã€è‡‰å‹ï¼ˆä¸ç”¨ç‰¹åœ°æ‹‰é•·æˆ–è®ŠçŸ­ï¼‰ï¼Œæœ€é©åˆé †è‘—çœ¼ç›çš„å¼§åº¦ï¼Œåšå‡ºä¸€å°æŸ”å’Œè‡ªç„¶çš„çœ‰æ¯›ã€‚<br><br>å¤ªåˆ»æ„å¼·èª¿è§’åº¦åè€Œæœƒç ´å£å¦³åŸæœ¬æº«æŸ”çš„æ°£è³ªå–”ï¼è®“æˆ‘ç‚ºä½ ä¿ç•™é€™ä»½å¤©ç”Ÿçš„ç²¾ç·»æ„Ÿå§'
              },
              { 
                img: 'sources/å¿ƒå‹è‡‰.jpg', 
                name: 'å¿ƒå½¢è‡‰', 
                color: '#C7A290',
                description: 'å¿ƒå½¢è‡‰çš„ç‰¹è‰²æ˜¯é¡é ­è¼ƒå¯¬ã€ä¸‹å·´å°–ç´°ï¼Œå‘ˆç¾å‡ºå„ªé›…çš„å€’ä¸‰è§’å½¢',
                features: 'å½æœˆçœ‰ã€åœ“å¼§çœ‰',
                eyebrowStyle: 'ç¸®çŸ­é¡å¯¬è¦–è¦º â• æŸ”åŒ–å°–ä¸‹å·´ <br> â–«ï¸ çœ‰å³°ï¼š åœ“æ½¤ä¸”ä½ç½®é©ä¸­ã€‚çœ‰å³°ä¸å®œéé«˜ï¼Œéœ€ç”¨åœ“æ»‘çš„ç·šæ¢ä¾†å¹³è¡¡ä¸‹å·´çš„å°–éŠ³æ„Ÿ<br> â–«ï¸ çœ‰å‹ï¼š å¼·èª¿æŸ”éœ§æ„Ÿèˆ‡å¼§åº¦ï¼Œçœ‰æ¯›é•·åº¦è¦é©ä¸­ï¼ˆä¸å¯å¤ªçŸ­ï¼‰ï¼Œæœ‰åŠ©æ–¼åœ¨è¦–è¦ºä¸Šæ”¶çª„å¯¬é—Šçš„é¡é ­<br> <br> âŒ NG çœ‰å‹ï¼š<br> â–«ï¸æ­ç¾çœ‰ï¼š éŠ³åˆ©çš„çœ‰å³°æœƒè®“åŸæœ¬å°±å¯¬çš„é¡é ­çœ‹èµ·ä¾†æ›´å¯¬ï¼Œä¹Ÿæœƒè®“ä¸‹å·´çœ‹èµ·ä¾†æ›´å°–éŠ³ï¼Œæ•´å¼µè‡‰æœƒé¡¯å¾—æ¯”ä¾‹å¤±è¡¡',
                tips: 'å°æ–¼å¿ƒå‹è‡‰ä¾†èªªï¼Œçœ‰æ¯›æ˜¯ã€Œå¹³è¡¡åŠ‘ã€<br> æ‹’çµ•ä»»ä½•ç”Ÿç¡¬çš„ç¨œè§’ï¼Œè€Œæ˜¯ç”¨ä¸€æ¢å®Œç¾çš„æ‹‹ç‰©ç·šï¼Œå»ä¸­å’Œè‡‰éƒ¨çš„éŠ³åˆ©ç·šæ¢<br> <br> é€™ç¨®è¨­è¨ˆèƒ½æŠŠå¤©ç”Ÿçš„ã€Œç²¾ç·»æ„Ÿã€è½‰åŒ–ç‚ºã€Œç”œç¾æ„Ÿã€ï¼Œè®“çœ¼ç¥çœ‹èµ·ä¾†æ›´æº«æŸ”æ°´éˆ'
              },
              { 
                img: 'sources/é•·å‹è‡‰.jpg', 
                name: 'é•·å‹è‡‰', 
                color: '#E8D5C8',
                description: 'è‡‰å‹é•·åº¦æ˜é¡¯å¤§æ–¼å¯¬åº¦ï¼Œä¸­åº­è¼ƒé•·<br>çµ¦äººæ°£è³ªçš„å°è±¡ï¼Œä½†ä¹Ÿå®¹æ˜“é¡¯å¾—è¼ƒç‚ºæˆç†Ÿ',
                features: 'å¾®å¹³çœ‰',
                eyebrowStyle: 'æ©«å‘å»¶ä¼¸ â• ç¸®çŸ­ä¸­åº­ <br>â–«ï¸çœ‰å‹ï¼š æ¡ç”¨ä¸€å­—å¹³çœ‰æˆ–å¾®å¹³çœ‰ï¼Œåˆ©ç”¨æ°´å¹³ç·šæ¢ä¾†ä¸­å’Œè‡‰éƒ¨çš„å‚ç›´æ„Ÿã€‚<br>â–«ï¸çœ‰å¯¬ï¼š å»ºè­°ä¿ç•™ä¸€é»ç²—åº¦ï¼Œç¨å¾®åŠ ç²—çš„çœ‰å‹å¯ä»¥ç¸®çŸ­é¡é ­çš„è¦–è¦ºé«˜åº¦<br><br>âŒ NG çœ‰å‹ï¼š<br>â–«ï¸æ­ç¾é«˜æŒ‘çœ‰ã€å¤§å½çœ‰ï¼š æ‹±èµ·çš„çœ‰å‹æœƒå†æ¬¡æ‹‰é•·è‡‰éƒ¨æ¯”ä¾‹ï¼Œè®“è‡‰çœ‹èµ·ä¾†ç„¡æ­¢ç›¡å»¶ä¼¸<br>â–«ï¸çœ‰å°¾ä¸‹å‚éå¤šï¼š æœƒè®“è‡‰éƒ¨ç·šæ¢çœ‹èµ·ä¾†å¾€ä¸‹å®ï¼Œé¡¯å¾—æ²’ç²¾ç¥',
                tips: 'åˆ¥è®“çœ‰æ¯›ã€Œæ‹‰é•·ã€äº†å¦³çš„è‡‰ï¼ <br>é•·å‹è‡‰æœ€é©åˆå¹³ç›´çš„ç·šæ¢ï¼Œèƒ½èµ·åˆ°ã€Œæ©«å‘æ“´å¼µã€çš„ä½œç”¨ï¼Œè®“åŸæœ¬çª„é•·çš„è‡‰å‹çœ‹èµ·ä¾†è±æ½¤ä¸€äº›<br> <br>é€™ç¨®è¨­è¨ˆèƒ½æœ‰æ•ˆã€Œç¸®çŸ­è‡‰é•·ã€ï¼Œè®“ä½ å¾æˆç†Ÿå§Šå§Šæ„Ÿï¼Œç¬é–“è®Šèº«æº«æŸ”é„°å®¶å¥³å­©'
              },
              { 
                img: 'sources/åœ“å‹è‡‰.jpg', 
                name: 'åœ“å‹è‡‰', 
                color: '#D4B5A0',
                description: 'æœ€å¼·é€†é½¡çš„ã€Œç«¥é¡ã€è‡‰å‹ï¼<br>è‡‰éƒ¨è¼ªå»“åœ“æ½¤ã€æ²’æœ‰ç¨œè§’ï¼Œçµ¦äººå¯æ„›çš„ç”œç¾å°è±¡',
                features: 'æ¨™æº–å¾®æŒ‘çœ‰',
                eyebrowStyle: 'åœ“è‡‰çš„è¨­è¨ˆæ ¸å¿ƒåœ¨æ–¼ã€Œç ´é™¤åœ“æ½¤æ„Ÿï¼Œå¢åŠ ç«‹é«”åº¦ã€<br><br>â–«ï¸çœ‰å‹ï¼šå¸¶é»å¼§åº¦ï¼Œé¿å…å¤ªéç”Ÿç¡¬çš„ç›´ç·š<br>â–«ï¸çœ‰å³°ï¼šå¾®ä¸ŠæŒ‘ï¼Œè®“åœ“æ½¤çš„è‡‰è›‹å¢åŠ ç¨œè§’èˆ‡ç«‹é«”æ„Ÿ<br>â–«ï¸çœ‰å°¾ï¼šçœ‰å°¾é©åº¦æ‹‰é•·ï¼Œé”åˆ°æ”¶ç¸®è‡‰å‹çš„æ•ˆæœ<br><br>âŒ NG çœ‰å‹<br>â–«ï¸ä¸€å­—å¹³çœ‰ï¼š æœƒåƒæŠŠè‡‰ã€Œå£“æ‰ã€äº†ï¼Œè®“äº”å®˜çœ‹èµ·ä¾†æ›´åˆ†æ•£ã€è‡‰é¡¯å¾—æ›´åœ“<br>â–«ï¸çŸ­çœ‰ï¼š çœ‰å°¾å¤ªçŸ­æœƒè®“å¤ªé™½ç©´ç•™ç™½éå¤šï¼Œè¦–è¦ºä¸Šè‡‰æœƒè®Šå¯¬',
                tips: 'ç›®æ¨™æ˜¯åœ¨è¦–è¦ºä¸Šå°‡è‡‰éƒ¨ã€Œå‚ç›´æ‹‰ä¼¸ã€åˆ©ç”¨ç•¥ç‚ºä¸Šæšçš„çœ‰å‹ï¼Œå¼•å°è¦–ç·šå‘ä¸Šå»¶ä¼¸ï¼Œæ‰“ç ´åœ“è‡‰çš„åœ“æ½¤æ„Ÿ<br><br>é€™ä¸åƒ…èƒ½ä¿ç•™å¦³çš„å¯æ„›ï¼Œé‚„èƒ½å¹«å¦³åŠ ä¸€é»ç«‹é«”è¼ªå»“ï¼Œè®“è‡‰çœ‹èµ·ä¾†æ›´å°ã€æ›´ç²¾ç·»ï¼'
              },
              { 
                img: 'sources/æ–¹å‹è‡‰.jpg', 
                name: 'æ–¹å½¢è‡‰', 
                color: '#D4B5A0',
                description: 'ä¸‹é¡éª¨éª¼æ„Ÿè¼ƒå¼·ï¼Œè‡‰éƒ¨ç·šæ¢ç¨œè§’åˆ†æ˜<br>é›–ç„¶çœ‹èµ·ä¾†å¾ˆæœ‰å€‹æ€§ï¼Œä½†æœ‰æ™‚æœƒæ“”å¿ƒç¼ºä¹æŸ”å’Œæ„Ÿï¼Œçµ¦äººæ¯”è¼ƒåš´è‚…çš„å°è±¡',
                features: 'å½æœˆçœ‰ã€åœ“å¼§çœ‰',
                eyebrowStyle: 'æŸ”åŒ–è‡‰éƒ¨ç¨œè§’ â• ç¸®çª„ä¸‹é¡è¦–è¦º<br>â–«ï¸ çœ‰å³°ï¼š åœ“æ½¤ç„¡ç¨œè§’ã€‚åƒæœˆäº®èˆ¬çš„åœ“å¼§ç·šæ¢ï¼Œèƒ½è¦–è¦ºä¸Šå‰Šå¼±ä¸‹å·´çš„æ–¹å½¢æ„Ÿ<br>â–«ï¸ çœ‰å¯¬ï¼š å»ºè­°ä¿ç•™ä¸€å®šç²—åº¦ï¼Œå¤ªç´°çš„çœ‰æ¯›æœƒå£“ä¸ä½æ–¹è‡‰çš„ä»½é‡æ„Ÿ<br><br>âŒ NG çœ‰å‹<br>â–«ï¸å¹³çœ‰ï¼š æ–¹è‡‰ç•«å¹³çœ‰æ˜¯å¤§å¿Œï¼æœƒè®“è‡‰çœ‹èµ·ä¾†æ›´çŸ­ã€æ›´å¯¬ã€æ›´æ–¹<br>â–«ï¸åŠçœ‰/éŠ³åˆ©çœ‰ï¼š ä¸‰è§’å½¢çš„çœ‰å³°æœƒåŠ é‡è‡‰éƒ¨çš„ã€Œå‰›ç¡¬æ„Ÿã€',
                tips: 'é€™æ˜¯æ¨™æº–çš„ã€Œä»¥æŸ”å…‹å‰›ã€é­”æ³•ï¼<br> ä¸èˆ‡è‡‰å‹å°æŠ—ï¼Œè€Œæ˜¯åˆ©ç”¨çœ‰æ¯›çš„åœ“å¼§æ›²ç·šï¼Œå»åŒ…å®¹ä¸¦ä¿®é£¾è‡‰éƒ¨çš„æ–¹æ­£ç·šæ¢<br><br>é€™ç¨®è¨­è¨ˆèƒ½è®“å¦³çš„è‡‰å‹çœ‹èµ·ä¾†æ›´åŠ é †æš¢æŸ”å’Œï¼Œç¬é–“å¾ã€Œåš´è‚…ä¸»ç®¡ã€è®Šèº«ã€Œæ°£è³ªå¥³ç¥ã€'
              },
              { 
                img: 'sources/è±å½¢è‡‰.jpg', 
                name: 'è±å½¢è‡‰', 
                color: '#C7A290',
                description: 'è‡ªå¸¶æ°£å ´çš„ã€Œé‘½çŸ³ç´šã€éª¨ç›¸ï¼<br>é¡´éª¨è¼ƒå¯¬ä¸”æ˜é¡¯ï¼Œé¡é ­èˆ‡ä¸‹å·´è¼ƒçª„ï¼Œå¤ªé™½ç©´å®¹æ˜“æœ‰å‡¹é™·æ„Ÿã€‚è¼ªå»“åˆ†æ˜ä¸”å€‹æ€§åè¶³ï¼Œä½†æœ‰æ™‚æœƒé¡¯å¾—æ¯”è¼ƒéŠ³åˆ©',
                features: 'æŸ”å’Œå°å½çœ‰',
                eyebrowStyle: 'å¼±åŒ–å¼·å‹¢é¡´éª¨ â• å¡«è£œå¤ªé™½ç©´å‡¹é™·<br><br>â–«ï¸çœ‰å³°ï¼š é å‰ã€åœ“æ»‘ï¼Œå°‡è¦–è¦ºé‡å¿ƒå…§ç§»ï¼Œä¸è®“è¦–ç·šåœç•™åœ¨é¡´éª¨æœ€å¯¬è™•<br>â–«ï¸çœ‰å°¾ï¼š æ‹‰é•·ï¼Œåœ¨è¦–è¦ºä¸Šä¿®é£¾å‡¹é™·çš„å¤ªé™½ç©´ï¼Œè®“è‡‰å‹ç·šæ¢æ›´é †æš¢<br><br>âŒ NG çœ‰å‹<br>â–«ï¸å¹³çœ‰ï¼š æœƒé¡¯å¾—å‘†æ¿ï¼Œä¸”å°æ¯”ä¹‹ä¸‹æœƒè®“é¡´éª¨çœ‹èµ·ä¾†æ›´å¯¬<br>â–«ï¸çŸ­çœ‰ã€æ­ç¾é«˜æŒ‘çœ‰ï¼š çœ‰å°¾å¤ªçŸ­æœƒæš´éœ²å¤ªé™½ç©´ç¼ºé»ï¼›å¤ªéŠ³åˆ©çš„çœ‰å³°æœƒè®“è‡‰çœ‹èµ·ä¾†æ›´å…‡',
                tips: 'åˆ©ç”¨çœ‰æ¯›çš„å¼§åº¦ä¾†é€²è¡Œã€Œè¦–è¦ºå¾®æ•´ã€<br>é‡é»åœ¨æ–¼æ‹‰é•·çœ‰å°¾ä¾†å¹³è¡¡é¡´éª¨çš„å¯¬åº¦ï¼Œä¸¦ç”¨åœ“æ½¤çš„çœ‰å³°å»æŸ”åŒ–è‡‰éƒ¨çš„ç¨œè§’<br><br>é€™æ¨£è¨­è¨ˆå¾Œçš„çœ‰æ¯›ï¼Œèƒ½è®“åŸæœ¬éŠ³åˆ©çš„é‘½çŸ³è‡‰ï¼Œç¬é–“è®Šå¾—æµæš¢åˆç²¾ç·»ï¼Œæ•£ç™¼å‡ºç¨ç‰¹çš„çŸ¥æ€§ç¾'
              }
              ].map(face => `
              <div class="card rounded-3xl overflow-hidden" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 20px rgba(199, 162, 144, 0.12); transition: all 0.3s ease; cursor: pointer;" onclick="openFaceModal('${face.name}', '${face.img}', '${face.description}', '${face.features}', '${face.eyebrowStyle}', '${face.tips}')">
                <div style="position: relative; overflow: hidden; aspect-ratio: 4/5;">
                  <img src="${face.img}" alt="${face.name}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                  <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); padding: 20px 16px 12px;">
                    <p style="font-size: ${baseFont * 1.1}px; font-family: ${fontStack}; color: white; font-weight: 500; text-align: center; margin: 0;">
                      ${face.name}
                    </p>
                  </div>
                  <div class="face-card-overlay">
                    <div class="face-card-hint">é»æ“ŠæŸ¥çœ‹è©³æƒ…</div>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
          <p class="mt-6 text-center" style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.7; line-height: 1.8;">
            é»æ“Šåœ–ç‰‡äº†è§£æ›´å¤š Â· æ¯ç¨®è‡‰å‹éƒ½æœ‰æœ€é©åˆçš„çœ‰å‹è¨­è¨ˆï¼Œæœƒæ ¹æ“šæ‚¨çš„è‡‰å‹ã€äº”å®˜æ¯”ä¾‹èˆ‡å€‹äººé¢¨æ ¼ï¼Œé‡èº«æ‰“é€ å°ˆå±¬æ–¼æ‚¨çš„å®Œç¾çœ‰å‹
          </p>
        </div>

        <!-- è‡‰å‹æµ®å±¤ -->
        <div id="faceModal" class="face-modal" onclick="if(event.target.id === 'faceModal') closeFaceModal()">
          <button class="face-modal-close" onclick="closeFaceModal()">Ã—</button>
          <div class="face-modal-content">
            <div id="faceModalBody"></div>
          </div>
        </div>
      `;
    }

    function renderPricing(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      // éœ§çœ‰åƒ¹æ ¼åˆ—è¡¨
      const browPrices = [
        { title: 'æ–°å®¢éœ§çœ‰', price: 'æ´»å‹•åƒ¹ $6,800', originalPrice: 'åŸåƒ¹ $7,500', note: 'å« 3 å€‹æœˆå…§å…è²»è£œè‰²ä¹™æ¬¡', highlight: true, special: true },
        { title: '6å€‹æœˆå…§ï½œå–®æ¬¡è£œè‰²', price: '$2,000-$3,000', note: '', special: true },
        { title: '6â€“12å€‹æœˆå…§ï½œå–®æ¬¡è£œè‰²', price: '$5,000', note: '', special: true },
        { title: '12â€“14å€‹æœˆå…§ï½œå–®æ¬¡è£œè‰²', price: '$5,500', note: '', special: true },
        { title: '14å€‹æœˆä»¥ä¸Šï½œè¦–ç‚ºæ–°ä½œ', price: '$6,375', note: "äº«åŸåƒ¹ 85 æŠ˜å„ªæƒ ", special: true },
        { title: 'å…©äººåŒè¡Œå„ªæƒ ', price: '$5,800', note: 'ç¾æŠ˜ $1,000ï½œé ˆé ç´„ä¸åŒæ™‚æ®µ', special: true },
        { title: 'ç”·å£«éœ§çœ‰', price: 'ä»¥ä¸Šè²»ç”¨ +$1,000', note: '', special: true }
      ];

      // æ·¡è‰²åƒ¹æ ¼åˆ—è¡¨
      const removalPrices = [
        { title: 'æ·¡è‰²å–®å ‚', price: 'æ´»å‹•åƒ¹ $1,499', originalPrice: 'åŸåƒ¹ $1,799', note: '', special: true },
        { title: 'æ·¡è‰²åŒ…å ‚3æ¬¡', price: 'æ´»å‹•åƒ¹ $4,199', originalPrice: 'åŸåƒ¹ $4,999',note: 'å¹³å‡ $1,400ï¼å ‚', special: true },
        { title: 'æ·¡è‰²åŒ…å ‚5æ¬¡', price: 'æ´»å‹•åƒ¹ $6,499', originalPrice: 'åŸåƒ¹ $7,999',note: 'å¹³å‡ $1,300ï¼å ‚', special: true }
      ];

      const renderPriceItem = (item) => {
        return `
                <div class="card p-6 rounded-2xl" style="background: ${item.highlight ? `linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%)` : config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, ${item.highlight ? '0.2' : '0.1'}); ${item.special ? `border: 2px solid ${config.primary_action || defaultConfig.primary_action};` : ''}; display: flex; align-items: center;">
                  <div style="flex: 1;">
                    <div class="mb-2">
                      <h3 style="font-size: ${baseFont * 1.1}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500; white-space: nowrap;">
                        ${item.male ? ' ' : ''}${item.title}
                      </h3>
                    </div>
                    ${item.note ? `
                      <p style="font-size: ${baseFont * 0.85}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.7;">
                        ${item.note}
                      </p>
                    ` : ''}
                  </div>
                  <div class="px-4 py-2 rounded-xl flex-shrink-0 ${item.highlight ? '' : `bg-opacity-50`}" style="background: ${item.highlight ? config.primary_action || defaultConfig.primary_action : config.background_color || defaultConfig.background_color};">
                    <div style="display: flex; flex-direction: column; align-items: flex-end;">
                      ${item.originalPrice ? `
                        <span style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${item.highlight ? 'rgba(255, 255, 255, 0.7)' : 'rgba(92, 74, 66, 0.6)'}; margin-bottom: 2px;">
                          ${item.originalPrice}
                        </span>
                      ` : ''}
                      <span style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${item.highlight ? '#FFFFFF' : config.primary_action || defaultConfig.primary_action}; font-weight: 600; white-space: nowrap;">
                        ${item.price}
                      </span>
                    </div>
                  </div>
                </div>
              `;
      };

      return `
        <div class="mb-8 fade-in">
          <!-- åˆ‡æ›æŒ‰éˆ• -->
          <div class="flex justify-center gap-4 mb-8">
            <button id="pricing-btn-brow" onclick="switchPricingType('brow')" 
                    class="px-8 py-3 rounded-full transition-all"
                    style="background: ${config.primary_action || defaultConfig.primary_action}; color: white; font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; font-weight: 500; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(199, 162, 144, 0.3);">
              éœ§çœ‰
            </button>
            <button id="pricing-btn-removal" onclick="switchPricingType('removal')" 
                    class="px-8 py-3 rounded-full transition-all"
                    style="background: ${config.secondary_action || defaultConfig.secondary_action}; color: ${config.primary_text || defaultConfig.primary_text}; font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; font-weight: 500; border: none; cursor: pointer; box-shadow: 0 3px 12px rgba(199, 162, 144, 0.2);">
              æ·¡è‰²
            </button>
          </div>

          <!-- éœ§çœ‰åƒ¹æ ¼å…§å®¹ -->
          <div id="pricing-content-brow">
            <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
              åŸç”Ÿæ„Ÿï½œè¼•é€éœ§çœ‰
            </h2>
            <div class="space-y-4">
              ${browPrices.map(item => renderPriceItem(item)).join('')}
            </div>
          </div>

          <!-- æ·¡è‰²åƒ¹æ ¼å…§å®¹ -->
          <div id="pricing-content-removal" style="display: none;">
            <h2 class="mb-4 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 1px;">
              ç„¡å‰µï½œæ·¡è‰²
            </h2>
            <div class="mb-4 text-center">
              <p class="px-4 py-2 rounded-xl inline-block mx-auto" style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500; letter-spacing: 0.5px; background: ${config.secondary_action || defaultConfig.secondary_action};">
                ä¾ç…§å¯¦éš›æƒ…æ³ å°ˆæ¥­è©•ä¼°çµ¦äºˆå ‚æ•¸å»ºè­°
              </p>
            </div>
            <div class="space-y-4">
              ${removalPrices.map(item => renderPriceItem(item)).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function renderBooking(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const sections = [
        {
          title: 'é ç´„è³‡è¨Š',
          icon: 'ğŸ“',
          items: [
            'é ç´„æ™‚ï¼Œè«‹æä¾›å§“åã€æ‰‹æ©Ÿè™Ÿç¢¼ã€ä¸‰å€‹ç†æƒ³æ™‚æ®µï¼Œä»¥åˆ©å¿«é€Ÿå®‰æ’',
            'éœ€æ”¯ä»˜å®šé‡‘ $1,500 ä»¥ä¿ç•™æ™‚æ®µï¼Œå®šé‡‘å°‡æ–¼æ–½ä½œç•¶æ—¥æŠ˜æŠµæ¶ˆè²»ï¼Œè‹¥è‡¨æ™‚å–æ¶ˆæ•ä¸é€€é‚„',
            'ç‚ºç¢ºä¿æœå‹™å“è³ªèˆ‡ç¾æ„Ÿé”æˆå…±è­˜ï¼Œè‹¥ç¾å ´è¨­è¨ˆéšæ®µé›™æ–¹æœªé”æˆä¸€è‡´ï¼Œå°‡ä¸é€²è¡Œå¾ŒçºŒæ–½ä½œã€‚<strong>åŸå®šé‡‘ $1,500 å…ƒå°‡è½‰ç‚ºç•¶æ—¥ä¹‹ã€Œå°ˆæ¥­çœ‰å‹è¨­è¨ˆã€èˆ‡ã€ŒæŠ€è¡“è«®è©¢æœå‹™è²»ã€ï¼Œæ•ä¸é€€é‚„</strong>ï¼Œæ•¬è«‹è¦‹è«’ã€‚'
          ]
        },
        {
          title: 'åˆ°åº—é ˆçŸ¥',
          icon: 'ğŸ ',
          items: [
            'ç‚ºä¸å½±éŸ¿ä¸‹ä½å®¢äººæ¬Šç›Šï¼Œ<strong>è«‹æº–æ™‚èµ´ç´„</strong>ï¼ˆé²åˆ°10åˆ†é˜å¯èƒ½éœ€æ”¹æœŸï¼‰',
            'ç´ é¡ã€å¸¶å¦çš†å¯ï¼Œç¾å ´æœƒæ¸…æ½”çœ‰éƒ¨',
            'å€‹äººå·¥ä½œå®¤ï¼Œå¦‚éœ€æ”œä¼´è«‹æ–¼å…¬å…±å¤§å»³ç­‰å€™'
          ]
        },
        {
          title: 'æ–½ä½œå‰æé†’',
          icon: 'â°',
          items: [
            '<strong>å‰ä¸‰é€±è«‹å‹¿è‡ªè¡Œä¿®çœ‰</strong>ï¼Œä»¥åˆ©è¨­è¨ˆçœ‰å‹åƒè€ƒ',
            'æ–½ä½œå‰ 2â€“3 å¤©è«‹é¿å…é£²é…’ã€ç†¬å¤œï¼Œå¦å‰‡ç—›æ„Ÿæœƒè¼ƒç‚ºæ˜é¡¯',
            'ç‚ºç¶­æŒä¹¾æ·¨èˆ’é©çš„æœå‹™å“è³ªï¼Œè«‹æ‚¨å‹™å¿…æ¸…æ½”é ­é«®'
          ]
        },
        {
          title: 'æ”¹æœŸèˆ‡å–æ¶ˆ',
          icon: 'ğŸ”„',
          items: [
            'é ç´„å¦‚éœ€æ”¹æœŸï¼Œå‹™å¿…æ–¼å…©æ˜ŸæœŸå‰å‘ŠçŸ¥ï¼Œç‚ºç¶­è­·å…¶ä»–é ç´„å®¢äººçš„æ¬Šç›Šï¼Œæ›´æ”¹æ™‚é–“<strong>åƒ…é™ä¸€æ¬¡</strong>',
            '<strong>ç•¶æ—¥è‡¨æ™‚å–æ¶ˆæˆ–æœªåˆ°è€…ï¼Œå®šé‡‘ä¸é€€é‚„</strong>'
          ]
        },
        {
          title: 'ä¸‰å€‹æœˆå…§å…è²»è£œè‰²',
          icon: 'ğŸ’†ğŸ»â€â™€ï¸',
          items: [
            'è£œè‰²ç‚ºã€<strong>ä¸»å‹•é ç´„åˆ¶</strong>ã€ä¸æœƒå¦è¡Œé€šçŸ¥ï¼Œè«‹è¨˜å¾—ææ—©é ç´„æ™‚é–“å”· â™¡ å¸Œæœ›ä¸‹æ¬¡è¦‹é¢ï¼Œèƒ½è®“ä½ çš„çœ‰æ¯›æ›´å®Œç¾',
            'ç‚ºç¶­è­·æ‚¨çš„æ¬Šç›Šï¼Œè«‹å‹¿åœ¨æœŸé™å°‡è¿‘æ™‚æ‰é ç´„ï¼Œå¦‚å› æ­¤ç„¡æ³•åœ¨æœŸé™å…§å®Œæˆï¼Œå°‡è¦–åŒã€<strong>è‡ªé¡˜æ”¾æ£„å…è²»è£œè‰²æ¬Šåˆ©ï¼Œä¸å¾—è¦æ±‚é€€è²»</strong>ã€',
            'è¶…éä¸‰å€‹æœˆï¼Œæœƒä¾ç…§åƒ¹ç›®è¡¨æ”¶è²»'
          ]
        }
      ];

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            é ç´„é ˆçŸ¥
          </h2>
          <div class="space-y-4">
            ${sections.map(section => `
              <div class="card p-7 rounded-3xl" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, 0.1);">
                <div class="flex items-center gap-3 mb-4">
                  <span style="font-size: ${baseFont * 1.8}px;">${section.icon}</span>
                  <h3 style="font-size: ${baseFont * 1.4}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
                    ${section.title}
                  </h3>
                </div>
                <ul class="space-y-3">
                  ${section.items.map(item => `
                    <li class="flex items-start gap-3 p-3 rounded-xl" style="background: ${config.background_color || defaultConfig.background_color};">
                      <span style="color: ${config.primary_action || defaultConfig.primary_action}; font-size: ${baseFont}px; flex-shrink: 0; margin-top: 2px;">â€¢</span>
                      <span style="font-size: ${baseFont}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.8; opacity: 0.9;">
                        ${item}
                      </span>
                    </li>
                  `).join('')}
                </ul>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderAftercare(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      // éœ§çœ‰è­·ç†å…§å®¹
      const browSections = [
        {
          title: 'æ–½ä½œå¾Œ å‰å››å¤©',
          period: 'Day 1-4',
          items: [
            '48 å°æ™‚å…§é¿å…æ¥è§¸æ°´ï¼Œçœ‰æ¯›å€åŸŸä¿æŒä¹¾ç‡¥ä¸è¦æ‰æ“',
            'æ—© + æ™šä½¿ç”¨ç”Ÿç†é£Ÿé¹½æ°´æ¿•æ•·åäº”åˆ†é˜',
            'çœ‰æ¯›ä¹¾ç‡¥å¾Œï¼Œä½¿ç”¨ä¿®å¾©éœœè–„è–„çš„å¡—åœ¨çœ‰æ¯›ä¸Šï¼Œä¸€ç²’ç±³å¤§å°è–„æ“¦é›™çœ‰å³å¯'
          ],
          alert: true
        },
        {
          title: 'æ–½ä½œå¾Œ 1-2é€±å…§',
          period: 'Week 1-2',
          items: [
            'é¿é–‹ä»»ä½•ä¿é¤Šå“ã€åŒ–å¦å“ã€è‡‰éƒ¨é†«ç¾é›·å°„',
            'é¿å…é™½å…‰æ›æ›¬èˆ‡æ°´ç™‚æ´»å‹•ï¼Œä»¥å…å½±éŸ¿è‰²ç´ ç©©å®šæ€§'
          ],
          alert: true
        },
        {
          title: 'æ­£å¸¸ä¿®å¾©éç¨‹',
          period: 'ä¿®å¾©æœŸ',
          items: [
            'æ“ä½œå®Œæœ‰åˆºç—›ã€æ³›ç´…ç‚ºæ­£å¸¸ç¾è±¡ï¼Œéä¸€é™£å­æœƒæ¶ˆå¤±',
            'çµç—‚å’Œè„«çš®æ˜¯æ­£å¸¸çš„ç¾è±¡ï¼Œè«‹å‹¿ç”¨æ‰‹æ’•æ‹‰ã€æ“æ‰çœ‰æ¯›ï¼Œå¯èƒ½æœƒå½±éŸ¿é¡è‰²ä¸å‡å‹»'
          ]
        },
        {
          title: 'ç•™æ„è‚Œè†šç‹€æ³',
          period: 'æ³¨æ„äº‹é …',
          items: [
            'å¦‚æœçœ‰æ¯›å€åŸŸæœ‰ç´…è…«ã€ç˜™ç™¢ã€éæ•æˆ–å…¶ä»–ä¸é©ç—‡ç‹€ï¼Œè«‹ç«‹å³æ‰¾å°ˆæ¥­é†«å¸«ï¼Œä»¥ç¢ºä¿æœ€ä½³ä¿®å¾©æ•ˆæœ'
          ]
        },
        {
          title: 'å¦‚ä½•æé«˜ç•™è‰²ç‡ï¼Ÿ',
          period: 'ä¿é¤Šç§˜è¨£',
          items: [
            'æ‰€æœ‰åº•å¦ç”¢å“ã€é˜²æ›¬ã€ç¾ç™½é…¸é¡ä¿é¤Šå“ï¼Œç›¡å¯èƒ½é¿é–‹çœ‰æ¯›',
            'æ•·é¢è†œå¯åœ¨çœ‰æ¯›ä¸Šå…ˆå¡—å‡¡å£«æ—ã€ä¿é®®è†œã€æ£‰ç‰‡éš”é›¢',
            'æœ€ä½³è£œè‰²æœŸï¼šä¸€å€‹æœˆå¾Œã€ä¸‰å€‹æœˆå…§ï¼ˆè¶…æ™‚æœƒæŒ‰åƒ¹ç›®è¡¨æ”¶è²»ç”¨ï¼‰',
            'éœ§çœ‰å±¬æ–¼ä¾µå…¥å¼ï¼Œä¸€å¹´å…§ä¸é©å®œæè¡€'
          ]
        }
      ];

      // æ·¡è‰²è­·ç†å…§å®¹
      const removalSections = [
        {
          title: 'æ–½ä½œå®Œ ç•¶æ—¥',
          period: 'Day 1',
          items: [
            'è¿”å®¶å¯ä»¥å†°æ•· 15 åˆ†é˜ï¼Œå¹«åŠ©èˆ’ç·©è‚Œè†š',
            'ç•¶å¤©å³å¯æ­£å¸¸ç¢°æ°´'
          ],
          alert: true
        },
        {
          title: 'æ–½ä½œå®Œ éš”æ—¥èµ·',
          period: 'Week 1',
          items: [
            'éš”å¤©å¯æ­£å¸¸åŒ–å¦',
            'ä¸€é€±å…§è«‹é¿å…æ–¼çœ‰å‘¨ä½¿ç”¨ç¾ç™½æˆ–é…¸é¡ç”¢å“',
            'ä¸€é€±å…§è«‹åŠ å¼·ä¿æ¿•èˆ‡ç‰©ç†æ€§é˜²æ›¬ï¼ˆçœ‰æ¯›å€åŸŸäº¦éœ€é˜²æ›¬ï¼‰'
          ],
          alert: true
        },
        {
          title: 'æ­£å¸¸ä¿®å¾©éç¨‹',
          period: 'ä¿®å¾©æœŸ',
          items: [
            '3 å¤©å…§çœ‰æ¯›å¯èƒ½å‡ºç¾ ğŸ‘‰ å¾®ç´…ã€å¾®ç™¢ã€ç·Šç¹ƒä¹¾ç‡¥ã€é¡è‰²æš«æ™‚è®Šæ·±éƒ½å±¬æ­£å¸¸åæ‡‰'
          ]
        }
      ];

      const renderSections = (sections) => {
        return sections.map(section => `
              <div class="card p-7 rounded-3xl ${section.alert ? 'border-2' : ''}" style="background: ${section.alert ? `linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%)` : config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, 0.12); ${section.alert ? `border-color: ${config.primary_action || defaultConfig.primary_action};` : ''}">
                <div class="flex items-center justify-between mb-5 flex-wrap gap-3">
                  <h3 style="font-size: ${baseFont * 1.4}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
                    ${section.title}
                  </h3>
                  <span class="px-4 py-2 rounded-full" style="background: ${config.secondary_action || defaultConfig.secondary_action}; font-size: ${baseFont * 0.85}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500;">
                    ${section.period}
                  </span>
                </div>
                <ul class="space-y-3">
                  ${section.items.map(item => `
                    <li class="flex items-start gap-3 p-4 rounded-xl" style="background: ${config.background_color || defaultConfig.background_color};">
                      <span style="color: ${config.primary_action || defaultConfig.primary_action}; font-size: ${baseFont * 1.1}px; flex-shrink: 0;">âœ“</span>
                      <span style="font-size: ${baseFont}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.8; opacity: 0.9;">
                        ${item}
                      </span>
                    </li>
                  `).join('')}
                </ul>
              </div>
        `).join('');
      };

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-6 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            æ–½ä½œå¾Œç…§è­·ï½œæ³¨æ„äº‹é …
          </h2>
          
          <!-- åˆ‡æ›æŒ‰éˆ• -->
          <div class="flex justify-center gap-4 mb-8">
            <button id="aftercare-btn-brow" onclick="switchAftercareType('brow')" 
                    class="px-8 py-3 rounded-full transition-all"
                    style="background: ${config.primary_action || defaultConfig.primary_action}; color: white; font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; font-weight: 500; border: none; cursor: pointer; box-shadow: 0 4px 15px rgba(199, 162, 144, 0.3);">
              éœ§çœ‰
            </button>
            <button id="aftercare-btn-removal" onclick="switchAftercareType('removal')" 
                    class="px-8 py-3 rounded-full transition-all"
                    style="background: ${config.secondary_action || defaultConfig.secondary_action}; color: ${config.primary_text || defaultConfig.primary_text}; font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; font-weight: 500; border: none; cursor: pointer; box-shadow: 0 3px 12px rgba(199, 162, 144, 0.2);">
              æ·¡è‰²
            </button>
          </div>

          <!-- éœ§çœ‰è­·ç†å…§å®¹ -->
          <div id="aftercare-content-brow" class="space-y-5">
            ${renderSections(browSections)}
          </div>

          <!-- æ·¡è‰²è­·ç†å…§å®¹ -->
          <div id="aftercare-content-removal" class="space-y-5" style="display: none;">
            ${renderSections(removalSections)}
          </div>
        </div>
      `;
    }

    function renderPreparation(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const sections = [
        {
          title: 'éœ§çœ‰å‰ä¸‰é€±',
          icon: 'ğŸ“…',
          items: [
            'é¿å…åšä»»ä½•æ‹”æ¯›ã€ä¿®çœ‰ï¼Œä»¥å…å½±éŸ¿çœ‰å‹è¨­è¨ˆèˆ‡è‘—è‰²æ•ˆæœ',
            'é¿å…é€²è¡Œæœé…¸æ›è†šã€é›·å°„ã€ç…¥è†šç­‰é†«ç¾ç™‚ç¨‹',
            'é¿å…æ—¥æ›¬ã€éåº¦æ›æ›¬ï¼Œä»¥å…çš®è†šå—æå½±éŸ¿ä¸Šè‰²'
          ]
        },
        {
          title: 'éœ§çœ‰å‰ 24 å°æ™‚å…§',
          icon: 'â°',
          items: [
            'ä¹¾æ€§è‚Œè†šè€…â†’å¯ç”¨ä¿æ¿•ç”¢å“åŠ å¼·è‚Œè†šä¿æ°´åº¦ï¼›æ²¹æ€§è‚Œè†šè€…â†’å¯å»è§’è³ªæ¸›å°‘æ²¹è„‚åˆ†æ³Œ',
            'é¿å…é£²é…’ã€å’–å•¡ã€æ¿ƒèŒ¶ã€è¾›è¾£é£Ÿç‰©ï¼Œæ¸›å°‘è¡€æ¶²å¾ªç’°åŠ é€Ÿï¼Œå½±éŸ¿è‰²ä¹³å¸æ”¶',
            'åœæ­¢æœç”¨é˜¿æ–¯åŒ¹éˆã€ç¶­ä»–å‘½Eã€é­šæ²¹ç­‰æŠ—å‡è¡€è—¥ç‰©ï¼ˆå¦‚æœ‰é•·æœŸæœç”¨ï¼Œè«‹å…ˆè«®è©¢é†«å¸«ï¼‰',
            'ç¢ºä¿å……è¶³ç¡çœ ï¼Œé¿å…ç†¬å¤œå½±éŸ¿çš®è†šç‹€æ³ï¼Œå¦å‰‡ç—›æ„Ÿæœƒè¼ƒç‚ºæ˜é¡¯',
            'è‹¥çœ‰æ¯›æœ‰å‚·å£ã€æ¿•ç–¹ã€çš®è†šç‚ã€ç—˜ç—˜ç­‰æƒ…æ³ï¼Œè«‹æå‰å‘ŠçŸ¥ï¼Œç­‰çš®è†šç©©å®šå¾Œå†é ç´„'
          ]
        },
        {
          title: 'éœ§çœ‰ç•¶æ—¥',
          icon: 'âœ¨',
          items: [
            'ç‚ºäº†æœå‹™æ™‚çš„å“è³ªï¼Œè«‹å‹™å¿…æ¸…æ½”é ­é«®ã€é¿å…åƒé‡å£å‘³é£Ÿç‰©',
            'å„˜é‡ä¸è¦æ”œä¼´æˆ–å¯µç‰©åŒè¡Œï¼Œä»¥ç¢ºä¿æ–½ä½œç’°å¢ƒç„¡å¹²æ“¾ï¼Œè®“ä½ äº«å—æœ€å®Œç¾çš„éœ§çœ‰é«”é©—'
          ]
        }
      ];

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            æ–½ä½œå‰æº–å‚™èˆ‡ç¦å¿Œ
          </h2>
          <div class="space-y-5">
            ${sections.map(section => `
              <div class="card p-7 rounded-3xl" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, 0.1);">
                <div class="flex items-center gap-3 mb-5">
                  <span style="font-size: ${baseFont * 1.8}px;">${section.icon}</span>
                  <h3 style="font-size: ${baseFont * 1.4}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
                    ${section.title}
                  </h3>
                </div>
                <ul class="space-y-3">
                  ${section.items.map(item => `
                    <li class="flex items-start gap-3 p-4 rounded-xl" style="background: ${config.background_color || defaultConfig.background_color};">
                      <span style="color: ${config.primary_action || defaultConfig.primary_action}; font-size: ${baseFont * 1.1}px; flex-shrink: 0;">âœ“</span>
                      <span style="font-size: ${baseFont}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.8; opacity: 0.9;">
                        ${item}
                      </span>
                    </li>
                  `).join('')}
                </ul>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderLocation(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const locations = [
        {
          name: 'å°åŒ—ï½œå¤§å®‰åº—',
          address: 'ğŸ“ å°åŒ—å¸‚å¤§å®‰å€å¾©èˆˆå—è·¯äºŒæ®µ 11-1 è™Ÿ 12 æ¨“',
          transport: 'ğŸš‡ æ·é‹å¤§å®‰ç«™ 4 è™Ÿå‡ºå£ æ•£æ­¥30ç§’',
          mapLink: 'https://www.google.com/maps/search/?api=1&query=%E5%8F%B0%E5%8C%97%E5%B8%82%E5%A4%A7%E5%AE%89%E5%8D%80%E5%BE%A9%E8%88%88%E5%8D%97%E8%B7%AF%E4%BA%8C%E6%AE%B5%2011-1%20%E8%99%9F%2012%20%E6%A8%93'
        },
        {
          name: 'æ¿æ©‹ï½œæ–°åŸ”åº—',
          address: 'ğŸ“ æ–°åŒ—å¸‚æ¿æ©‹å€èŠæ•¬è·¯ 140 å·· 10 è™Ÿ 1 æ¨“',
          transport: 'ğŸš‡ æ·é‹æ–°åŸ” 4 è™Ÿå‡ºå£ æ•£æ­¥4åˆ†é˜',
          mapLink: 'https://www.google.com/maps/search/?api=1&query=%E6%96%B0%E5%8C%97%E5%B8%82%E6%9D%BF%E6%A9%8B%E5%8D%80%E8%8E%8A%E6%95%AC%E8%B7%AF%20140%20%E5%B7%B7%2010%20%E8%99%9F%201%20%E6%A8%93'
        }
      ];

      const locationImages = {
        'å°åŒ—ï½œå¤§å®‰åº—': {
          src: 'sources/studio_env.png',
          alt: 'å°åŒ—å¤§å®‰åº—å·¥ä½œå®¤åœ°åœ–'
        },
        'æ¿æ©‹ï½œæ–°åŸ”åº—': {
          src: 'sources/æ–°åŸ”åº—.png',
          alt: 'æ¿æ©‹æ–°åŸ”åº—å·¥ä½œå®¤åœ°åœ–'
        }
      };

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            
          </h2>
          
          <div class="grid md:grid-cols-2 gap-6">
            ${locations.map(loc => `
              <div class="card rounded-3xl overflow-hidden" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 20px rgba(199, 162, 144, 0.12);">
                <div class="p-6" style="background: ${config.background_color || defaultConfig.background_color}; border-bottom: 1px solid rgba(0,0,0,0.04);">
                  <h3 class="mb-4" style="font-size: ${baseFont * 1.3}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500;">
                    ${loc.name}
                  </h3>
                  <div class="space-y-3">
                    ${[
          { text: loc.address, highlight: false, mapLink: loc.mapLink },
          { text: loc.transport, highlight: true }
        ].filter(row => !!row.text).map(row => `
                      <div class="${row.highlight ? 'rounded-xl' : ''}" style="${row.highlight ? `background: ${config.card_background || defaultConfig.card_background}; padding: 12px 12px 12px 6px; margin-left: -6px;` : ''}">
                        <div style="display: flex; align-items: center; gap: 8px;">
                          <p style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${row.highlight ? (config.primary_action || defaultConfig.primary_action) : (config.primary_text || defaultConfig.primary_text)}; line-height: 1.8; opacity: 0.85; margin: 0; font-weight: ${row.highlight ? 500 : 400};">
                            ${row.text}
                          </p>
                          ${row.mapLink ? `
                            <a href="${row.mapLink}" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0;">
                              <img src="sources/copy-icon.png" alt="æŸ¥çœ‹åœ°åœ–" style="width: ${baseFont * 1.6}px; height: ${baseFont * 1.6}px; object-fit: contain;">
                            </a>
                          ` : ''}
                        </div>
                      </div>
                    `).join('')}
                  </div>
                </div>
                <div style="min-height: 280px; background: transparent;">
                  <div style="text-align: center; z-index: 1; padding: ${locationImages[loc.name] ? '0' : '20px'}; height: 100%; display: flex; align-items: center; justify-content: center; background: transparent;">
                    ${locationImages[loc.name]
          ? `
                        <img src="${locationImages[loc.name].src}" alt="${locationImages[loc.name].alt}" style="width: 100%; height: 100%; object-fit: cover; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);" />
                      `
          : `
                        <div style="font-size: ${baseFont * 3}px; margin-bottom: 12px;">${loc.mapIcon}</div>
                        <p style="font-size: ${baseFont * 1.3}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.8; font-weight: 500;">
                          ${loc.name}
                        </p>
                        <p style="font-size: ${baseFont * 0.85}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.5; margin-top: 8px;">
                          åœ°åœ–å±•ç¤ºå€åŸŸ
                        </p>
                      `}
                  </div>
                </div>
              </div>
            `).join('')}
          </div>

          <div class="card p-8 rounded-3xl text-center mt-6" style="background: linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%); box-shadow: 0 4px 20px rgba(199, 162, 144, 0.15);">
            <h3 class="mb-3" style="font-size: ${baseFont * 1.4}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500;">
              ğŸ  å€‹äººå·¥ä½œå®¤ï¼Œç’°å¢ƒèˆ’é©å®‰éœ
            </h3>
            <p style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.85;">
              æä¾›ç§å¯†èˆ’é©çš„æœå‹™ç©ºé–“ï¼Œè®“æ‚¨æ”¾é¬†äº«å—ç¾éº—æ™‚å…‰ï¼Œ<strong>å¦‚æ”œä¼´è«‹æ–¼å…¬å…±å¤§å»³ç­‰å€™</strong>ï¼Œæ„Ÿè¬é…åˆ â—ï¸
              
            </p>
          </div>
        </div>
      `;
    }

    function renderFAQBrow(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const faqs = [
        {
          q: 'éœ§çœ‰è·Ÿé£„çœ‰çš„å·®åˆ¥æ˜¯ä»€éº¼ï¼Ÿ',
          a: `<strong>ï½œéœ§çœ‰ï¼ˆç²‰éœ§æ„Ÿï¼‰</strong><br>
          ãƒ»ä¿è½çš„çœ‰å‹ï¼Œåƒçœ‰ç²‰æƒéçš„æŸ”éœ§å¦æ„Ÿ<br>
          ãƒ»æ¿ƒæ·¡å¯èª¿ï¼šè‡ªç„¶ âœ éŸ“ç³» âœ å¦æ„Ÿ<br><br>
          <strong>âœ æŠ€è¡“æ–¹å¼ï¼š</strong><br>
          ãƒ»ç´°é‡é»é»å †ç–Šï¼Œå‘ˆç¾ã€Œå™´éœ§æ•ˆæœã€<br>
          ãƒ»é¡è‰²å‡å‹»ã€æŒè‰²åº¦é«˜<br><br>
          <strong>âœ“ é©åˆæ—ç¾¤ï¼š</strong><br>
          ãƒ»çœ‰æ¯›ç¨€ç–ã€æƒ³è£œçœ‰å‹/çœ‰è‰²<br>
          ãƒ»å¹³æ™‚æœ‰åŒ–å¦ï¼Œæƒ³èµ·åºŠå°±è‡ªå¸¶çœ‰å¦çš„äºº<br>
          ãƒ»æ²¹è‚Œã€æ··åˆè‚Œè¶…é©åˆ<br><br>
          <strong>ï½œé£„çœ‰ï¼ˆç·šæ¢æ„Ÿï¼‰</strong><br>
          ãƒ»ä¸€æ ¹ä¸€æ ¹ä»¿çœŸæ¯›æµï¼Œè¶…è‡ªç„¶åƒå¤©ç”Ÿçœ‰<br><br>
          <strong>âœ æŠ€è¡“æ–¹å¼ï¼š</strong><br>
          ãƒ»æ‰‹å·¥åˆ€ç‰‡ or æ©Ÿå™¨åˆ»ç•«ç·šæ¢<br><br>
          <strong>âœ“ é©åˆæ—ç¾¤ï¼š</strong><br>
          ãƒ»æƒ³è‡ªç„¶ã€ç„¡å¦æ„Ÿçœ‰æ¯›çš„äºº<br>
          ãƒ»ä¹¾è‚Œã€ä¸­æ€§è‚Œæ›´æŒä¹…ï¼ˆæ²¹è‚Œç·šæ¢æ˜“ç³Šï¼‰`
        },
        {
          q: 'éœ§çœ‰éœ€è¦å¤šä¹…ï¼Ÿ',
          a: `éœ§çœ‰æ–½ä½œæ™‚é–“å¹³å‡ç´„ 3ï½3.5 å°æ™‚ï¼Œä¾å€‹äººçœ‰å‹ã€è†šæ³èˆ‡æºé€šæ™‚é–“æœƒæœ‰äº›å·®ç•°<br><br>
          <strong>æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</strong><br>
          â‘  è«®è©¢ / æºé€šçœ‰å‹ï¼ˆ10â€“20 åˆ†é˜ï¼‰<br>
          â‘¡ ç•«çœ‰è¨­è¨ˆç¢ºèªï¼ˆ40â€“60 åˆ†é˜ï¼‰<br>
          â‘¢ æ•·èˆ’ç·©è†æ™‚é–“ï¼ˆ20â€“30 åˆ†é˜ï¼‰<br>
          â‘£ æ­£å¼æ–½ä½œéœ§çœ‰ï¼ˆ90â€“120 åˆ†é˜ï¼‰<br>
          â‘¤ æ–½ä½œå¾Œç…§è­·èˆ‡èªªæ˜ï¼ˆ10åˆ†é˜ï¼‰<br><br>
          å»ºè­°é ç•™4å°æ™‚æ“ä½œæ™‚é–“ï¼Œè®“æœ‰è¶³å¤ æ™‚é–“æ‰“é€ ç†æƒ³çœ‰å‹ï¼Œä¹Ÿè®“ä½ å¯ä»¥è¼•é¬†è‡ªåœ¨ğŸ¤`
        },
        {
          q: 'ç‚ºä»€éº¼æœƒè®Šæ©˜ç´…çœ‰ï¼Ÿ',
          a: `<strong>â‘  è‰²æ–™æ°§åŒ–è®Šè‰²</strong><br>
          æ—©æœŸæˆ–å“è³ªè¼ƒå·®çš„è‰²ä¹³ï¼Œå¤šå«éµæ°§åŒ–ç‰©æˆ–åç´…èª¿çš„é¡æ–™ã€‚æ™‚é–“ä¹…äº†ï¼Œé€™äº›æˆåˆ†æœƒæ…¢æ…¢æµ®å‡ºè¡¨é¢ï¼Œå› æ­¤çœ‰æ¯›å°±å®¹æ˜“å‡ºç¾æ©˜ç´…è‰²èª¿<br><br>
          <strong>â‘¡ ä½¿ç”¨åæš–è‰²èª¿çš„è‰²ä¹³</strong><br>
          å¤šæ•¸å’–å•¡è‰²è‰²ä¹³æ˜¯ç”± ç´…ã€é»ƒã€é»‘ã€ç™½ èª¿å’Œè€Œæˆï¼š<br>
          ãƒ»ç´…ã€é»ƒåˆ†å­å¤§ â†’ ä¸æ˜“ä»£è¬<br>
          ãƒ»é»‘ã€ç™½åˆ†å­å° â†’ ä»£è¬æœ€å¿«<br><br>
          éš¨è‘—æ™‚é–“æ¨ç§»ï¼Œé»‘ç™½è‰²ç´ å…ˆè¢«çš®è†šå¸æ”¶ï¼Œå‰©ä¸‹ç´…é»ƒè‰²ç´ ï¼Œçœ‰æ¯›å°±æœƒè®Šå¾—åç´…æˆ–æ©˜ç´…`
        },
        {
          q: 'éœ§çœ‰å¯ä»¥ç¶­æŒå¤šä¹…ï¼Ÿ',
          a: `éœ§çœ‰ä¸æ˜¯ä¸€åšå°±æ°¸ä¹…ï¼Œæœƒè‡ªç„¶æ·¡åŒ–ï¼Œç¶­æŒç´„ 1ï½2 å¹´ï¼Œå±¬æ–¼å¯éš¨è‘—æµè¡Œèˆ‡è‡‰å‹è®ŠåŒ–é‡æ–°èª¿æ•´çš„åŠæ°¸ä¹…æ€§å¦æ„Ÿ<br><br>
          â–´ å¯¦éš›æŒä¹…åº¦æœƒä¾æ¯ä½å®¢äººçš„è†šè³ªã€ä»£è¬é€Ÿåº¦ã€ç”Ÿæ´»ç¿’æ…£ï¼ˆé »ç¹å»è§’è³ªã€å¼·çƒˆæ—¥æ›¬ã€é†«ç¾é›·å°„ã€é£²é…’ï¼‰è€Œæœ‰æ‰€ä¸åŒ`
        },
        {
          q: 'éœ§çœ‰æœƒç—›å—ï¼Ÿ',
          a: `æ•·èˆ’ç·©è†å¾Œé‚„æ˜¯æœƒæœ‰å¾®å¾®åˆºæ„Ÿï¼Œç–¼ç—›æ„Ÿæœƒä¾å€‹äººè†šæ³ã€æœˆç¶“é€±æœŸã€æ•æ„Ÿç¨‹åº¦ç•¥æœ‰ä¸åŒï¼Œä½†æ™®ééƒ½åœ¨å¯æ¥å—ç¯„åœå…§<br><br>
          <strong>éœ§çœ‰å¸«çœŸèª å»ºè­°â—ï¸ç‰¹åˆ¥æ€•ç—›çš„å®¢äººâ—ï¸</strong><br>
          è«‹é¿é–‹ç”Ÿç†æœŸã€æ–½ä½œå‰ä¿æŒå……è¶³ç¡çœ èˆ‡ç©©å®šä½œæ¯ã€çœ‰å€è‚Œè†šåŠ å¼·ä¿æ¿•ï¼ï¼`
        },
        {
          q: 'ä»–åº—éœ§çœ‰éï¼Œå¯ä»¥ä¾†é€™é‚Šè£œè‰²å—ï¼Ÿ',
          a: `ä¸åŒåº—å®¶ä½¿ç”¨çš„è‰²ä¹³ã€æ‰‹æ³•èˆ‡ç”¢å“éƒ½æœ‰å·®ç•°ï¼Œæ‰€ä»¥åªè¦ä¸æ˜¯åœ¨æœ¬åº—åšçš„çœ‰æ¯›ï¼Œéƒ½è¦–ç‚ºã€Œé‡æ–°æ“ä½œã€<br><br>
          è‹¥åŸæœ¬æœ‰åº•è‰²ï¼Œè«‹å…ˆæä¾›ç…§ç‰‡è®“æˆ‘è©•ä¼°æ˜¯å¦èƒ½ç›´æ¥é‡ä½œæˆ–éœ€å…ˆæ·¡è‰²ï¼Œé¿å…ç™½è·‘ä¸€è¶Ÿå”·ğŸ¤`
        },
        {
          q: 'ä¸€å®šè¦é€²è¡Œä¸‰å€‹æœˆå…§çš„è£œè‰²å—ï¼Ÿ',
          a: `<strong>å‘Šè¨´ä½ ä¸‰å€‹è£œè‰²çš„å„ªé»ï¼š</strong><br><br>
          <strong>â‘  çœ‰è‰²å‡å‹»é£½æ»¿</strong><br>
          åˆæ¬¡æ–½ä½œæ™‚ï¼Œçœ‰æ¯›çš„è‰²æ–™æœƒå› çš®è†šä»£è¬ã€è†šè³ªå·®ç•°è€Œå¸æ”¶ä¸åŒï¼Œè£œè‰²èƒ½è®“é¡è‰²æ›´å‡å‹»é£½æ»¿<br><br>
          <strong>â‘¡ æŒä¹…åº¦æ›´ä½³</strong><br>
          è£œè‰²å¾Œçœ‰è‰²æ›´ç©©å®šã€æ›´è‡ªç„¶ï¼Œèƒ½å»¶é•·ç¶­æŒæ™‚é–“ï¼Œé¿å…é€€è‰²ä¸å‡<br><br>
          <strong>â‘¢ çœ‰å‹æ›´å®Œç¾</strong><br>
          ç¬¬ä¸€æ¬¡æ–½ä½œä¸»è¦ç¢ºèªçœ‰å‹ï¼Œè£œè‰²æ™‚å¯ä»¥å¾®èª¿ç´°ç¯€ï¼Œè®“æ•´é«”æ•ˆæœæ›´ç²¾ç·»`
        },
        {
          q: 'éœ§çœ‰å¯ä»¥è®Šå°ç¨±å—ï¼Ÿ',
          a: `é¦–å…ˆï¼Œæ¯å€‹äººçš„çœ‰æ¯›èˆ‡äº”å®˜å¤©ç”Ÿå°±å­˜åœ¨äº›å¾®ä¸å°ç¨±ã€‚çœ‰å‹è¨­è¨ˆä¸¦éè¿½æ±‚ã€Œå·¦å³å®Œå…¨è¤‡è£½ã€ï¼Œè€Œæ˜¯æ ¹æ“š äº”å®˜æ¯”ä¾‹ã€çœ‰éª¨é«˜åº¦èˆ‡è‚Œè‚‰å‹•æ…‹ å»èª¿æ•´ï¼Œæ‰“é€ è¦–è¦ºä¸Šæœ€å’Œè«§ã€æœ€é©åˆä½ çš„å°ç¨±æ„Ÿ<br><br>
          <strong>âœ” çµè«–</strong><br>
          éœ§çœ‰çš„é‡é»ä¸æ˜¯è¿½æ±‚ã€Œæ©Ÿæ¢°å¼å°ç¨±ã€ï¼Œè€Œæ˜¯æ‰“é€ èˆ‡ä½ è‡‰éƒ¨å”èª¿ã€æ—¥å¸¸çœ‹èµ·ä¾†è‡ªç„¶å¹³è¡¡çš„çœ‰å‹<br><br>
          <strong>â†“ æœ€çµ‚æ•ˆæœæœƒæ˜¯ â†“</strong><br>
          çœ‹èµ·ä¾†å°ç¨±ã€ä¸åƒµç¡¬ã€å®Œå…¨è²¼åˆä½ çš„äº”å®˜æ¯”ä¾‹`
        },
        {
          q: 'éä¸€é™£å­è¦è¾¦å©šç¦®oræ‹å©šç´—ï¼Œé©åˆéœ§çœ‰å—ï¼Ÿ',
          a: `ç¬¬ä¸€æ¬¡éœ§çœ‰æœƒä»¥ç´ é¡æ„Ÿã€è‡ªç„¶ç³»ç‚ºä¸»ï¼Œç­‰ç¿’æ…£ä¹‹å¾Œï¼Œè£œè‰²æ™‚å†ä¾ç…§å–œå¥½æ…¢æ…¢èª¿æ•´æ¿ƒæ·¡èˆ‡å¦æ„Ÿé¢¨æ ¼<br><br>
          è‹¥è¿‘æœŸæœ‰æ‹å©šç´—æˆ–å©šç¦®è¡Œç¨‹ï¼Œä¹Ÿå»ºè­°æå‰èˆ‡æ–°ç§˜è¨è«–ï¼Œè®“æ•´é«”å¦å®¹æ›´ä¸€è‡´å”·ğŸ¤`
        },
        {
          q: 'æ‰‹å·¥éœ§çœ‰è·Ÿæ©Ÿå™¨éœ§çœ‰çš„å·®åˆ¥åœ¨å“ªè£¡ï¼Ÿ',
          a: `<strong>æ‰‹å·¥éœ§çœ‰ç‰¹è‰²åœ¨æ–¼ï¼š</strong><br>
          ãƒ»ä¸Šè‰²æ–¹å¼ï¼šæ‰‹å·¥ä¸€é»ä¸€é»ä¸Šè‰²<br>
          ãƒ»æ•ˆæœï¼šè‡ªç„¶è¼•éœ§ã€åç´ é¡æ„Ÿ<br>
          ãƒ»é©åˆè†šè³ªï¼šä¹¾è‚Œã€æ­£å¸¸æ··åˆè‚Œ<br>
          ãƒ»ç‰¹è‰²ï¼šæŸ”å’Œã€è¼•é€ã€ç¬¬ä¸€çœ¼éå¸¸è‡ªç„¶`
        }
      ];

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            éœ§çœ‰å¸¸è¦‹ Q&A
          </h2>
          <div class="space-y-5">
            ${faqs.map((faq, index) => `
              <div class="card p-7 rounded-3xl" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, 0.1);">
                <div class="flex items-start gap-4 mb-4">
                  <span class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center" style="background: ${config.primary_action || defaultConfig.primary_action}; color: white; font-size: ${baseFont * 0.9}px; font-family: ${fontStack}; font-weight: 600;">
                    ${index + 1}
                  </span>
                  <h3 style="font-size: ${baseFont * 1.3}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; padding-top: 2px;">
                    ${faq.q}
                  </h3>
                </div>
                <div class="p-5 rounded-2xl" style="background: ${config.background_color || defaultConfig.background_color};">
                  <p style="font-size: ${baseFont * 0.98}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.9;">
                    ${faq.a}
                  </p>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderFAQRemoval(config) {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const faqs = [
        {
          q: 'ä»€éº¼æ˜¯ç„¡å‰µæ·¡è‰²ï¼Ÿ',
          a: `ç„¡å‰µæ·¡è‰²æ˜¯ä¸€ç¨®åˆ©ç”¨å…‰å’Œç†±ï¼Œå°‡çœ‰éƒ¨è‰²ç´ æº«å’Œåˆ†è§£ï¼Œå†äº¤ç”±èº«é«”è‡ªç„¶ä»£è¬çš„æ·¡çœ‰æŠ€è¡“<br><br>
          âœ” ä¸ç ´çš®ã€ä¸æµè¡€<br>
          âœ” ä¸æœƒé€ æˆåŸç”Ÿçœ‰æ¯›æ‰å…‰<br>
          âœ” æ²’æœ‰æ¢å¾©æœŸï¼Œç•¶å¤©æ­£å¸¸ç”Ÿæ´»<br>
          âœ” é©åˆæƒ³æ·¡æ‰ ç´…çœ‰ã€æ©˜çœ‰ã€ç°çœ‰ã€æš—æ²‰çœ‰è‰²<br>
          âœ” éç¨‹æº«å’Œã€å®‰å…¨ã€æ•ˆæœè‡ªç„¶`
        },
        {
          q: 'ç´…çœ‰ã€æ©˜ç´…çœ‰ã€æ·±è—çœ‰è©²æ€éº¼è§£æ±ºï¼Ÿ',
          a: `æœ€å®‰å…¨ä¸”æœ€æœ‰æ•ˆçš„æ–¹å¼â†“<br>
          å…ˆåšã€Œç„¡å‰µæ·¡è‰²ã€è®“çœ‰æ¯›å›åˆ°æœ€è‡ªç„¶ã€ä¹¾æ·¨çš„ç‹€æ…‹<br>
          æ¥è‘—ï¼Œå†æ ¹æ“šä½ çš„è‡‰å‹é‡æ–°è¨­è¨ˆçœ‰å‹<br>
          é€²è¡Œå…¨æ–°çš„éœ§çœ‰æ–½ä½œï¼Œæ‰èƒ½æ“æœ‰çœŸæ­£ç²¾ç·»åˆå®Œç¾çš„çœ‰æ¯›`
        },
        {
          q: 'ç„¡å‰µæ·¡è‰²è·Ÿé†«ç¾é›·å°„å·®åˆ¥åœ¨å“ªï¼Ÿ',
          a: `ä¸ç ´çš®ã€ä¸æµè¡€<br>
          éä¾µå…¥æ€§ï¼Œä¸å½±éŸ¿çœ‰æ¯›ç”Ÿé•·<br>
          éç¨‹èˆ’æœã€åˆºç—›æ„Ÿä½<br>
          ç„¡éœ€ä¿®å¾©æœŸï¼Œéš”å¤©å³å¯ä¸Šå¦ã€å¸å¦å’Œä½¿ç”¨ä¿é¤Šå“<br>
          å®‰å…¨åˆé«˜æ•ˆï¼Œæ˜¯è§£æ±ºç°è—çœ‰å’Œæ©˜ç´…çœ‰çš„é¦–é¸æ–¹æ³•`
        },
        {
          q: 'æ·¡è‰²éç¨‹åŠéœ€è¦çš„æ¬¡æ•¸ï¼Ÿ',
          a: `æ¯å€‹äººçš„çœ‰æ¯›ç‹€æ³ä¸åŒï¼Œä¹‹å‰åšéçš„æ¬¡æ•¸ã€æŠ€è¡“ã€è‰²ä¹³éƒ½æœƒå½±éŸ¿<br>
          æ‰€éœ€æ¬¡æ•¸æœƒä¾ã€Œè‰²ç´ å †ç©ã€è€Œæœ‰æ‰€å·®ç•°<br><br>
          ğŸ“Œå»ºè­°é–“éš”ï¼š2 â€“ 4 é€±åšä¸€æ¬¡æ·¡è‰²<br>
          ğŸ“Œå¤§éƒ¨åˆ†å®¢äººçš„å¯¦éš›ç‹€æ³ï¼ˆåƒè€ƒï¼‰<br>
          ãƒ»æ·ºå’–å•¡è®Šæ©˜ç´…çœ‰ â†’ é€šå¸¸ 3 â€“ 4 æ¬¡<br>
          ãƒ»æ·±è¤ã€åé»‘ â†’ 3 â€“ 5 æ¬¡<br>
          ãƒ»èˆŠå¼çœ‰ã€10å¹´ä»¥ä¸Šæ·±è‰²çœ‰ â†’ 5 æ¬¡ä»¥ä¸Š<br><br>
          âš ï¸<strong>æ·¡è‰²å¾Œï¼Œåšéœ§çœ‰å‰è¦ç­‰è‡³å°‘ 1 å€‹æœˆ</strong><br>
          è®“çš®è†šä¼‘æ¯å¥½ï¼Œå¾ŒçºŒä¸Šè‰²æ›´ç©©å®š ğŸ¤`
        },
        {
          q: 'æ·¡è‰²å®Œæœ‰ä¿®å¾©æœŸå—ï¼Ÿ',
          a: `ä¸ç ´çš®ã€ä¸çµç—‚ã€ä¸å½±éŸ¿ä¸Šç­ç”Ÿæ´»<br>
          æœ‰å°‘æ•¸äººå¡è‰²å¤ªæ·±çš„åœ°æ–¹æœƒå¾®å‡ºç—§<br>
          ç­‰å¾…2-3å¤©æœƒè·Ÿè‘—çœ‰æ¯›ä¸€èµ·æ·¡åŒ–<br><br>
          æ“ä½œå®ŒçŸ­æš«åæ‡‰ï¼ˆå±¬æ–¼æ­£å¸¸ï¼‰<br>
          è¼•å¾®æ³›ç´…ï¼ˆé€šå¸¸ æ•¸å°æ™‚ï½1å¤©å…§é€€ï¼‰<br>
          å¾®æº«æ„Ÿã€ä¹¾ç‡¥æ„Ÿ<br>
          é¡è‰²æœƒæš«æ™‚è®Šæ·¡æˆ–éœ§éœ§ï¼ˆä¸æ˜¯æœ€çµ‚æ•ˆæœï¼‰`
        },
        {
          q: 'æ·¡è‰²å®Œå¯ä»¥ä¸Šå¦å—ï¼Ÿ',
          a: `å¯ä»¥ï¼Œä½†å»ºè­°ã€Œéš”ä¸€å¤©å†åŒ–ã€æœ€ç†æƒ³<br>
          ç•¶å¤©ä¸å»ºè­°ä¸Šå¦ï¼Œè®“çš®è†šä¼‘æ¯ã€é™ä½åˆºæ¿€<br>
          éš”å¤©èµ·å¯æ­£å¸¸åŒ–å¦<br>
          å»ºè­°ä½¿ç”¨ ä½åˆºæ¿€ã€ç„¡é…’ç²¾ã€ç„¡é…¸é¡ åº•å¦<br>
          å¦‚æœä¸€å®šè¦ç•¶å¤©åŒ–å¦ï¼Œè‡³å°‘é–“éš” 6â€“8 å°æ™‚<br>
          <strong>è¼•è–„ä¸Šå¦ã€ä¸æ‘©æ“¦çœ‰éƒ¨</strong>`
        },
        {
          q: 'æ·¡è‰²éœ€è¦é–“éš”å¤šä¹…ï¼Ÿ',
          a: `å»ºè­°æ¯æ¬¡é–“éš” 4ï½6 é€±<br><br>
          âœ” è®“çš®è†šå®Œå…¨ä»£è¬ã€ç©©å®š<br>
          âœ” é¡è‰²è‡ªç„¶æ…¢æ…¢æ·¡åŒ–<br>
          âœ” é™ä½åˆºæ¿€ã€æ•ˆæœæ›´å¥½<br><br>
          å¤ªå¯†é›†åè€Œæœƒå½±éŸ¿çš®è†šä¿®å¾©<br>
          é¡è‰²ä¹Ÿä¸æœƒé€€æ¯”è¼ƒå¿«å–”ï¼`
        },
        {
          q: 'ç‚ºä»€éº¼é€šå¸¸ä¸å»ºè­°ç›´æ¥æ”¹çœ‰å‘¢ï¼Ÿ',
          a: `é€éç„¡å‰µæ·¡è‰²ï¼Œå¯ä»¥å°‡åŸæœ‰çœ‰è‰²æ…¢æ…¢æ·¡åŒ–<br>
          é€™æ˜¯å†æ¬¡ç´‹ç¹¡å‰éå¸¸é‡è¦çš„æº–å‚™æ­¥é©Ÿ<br>
          å°±åƒé»‘æ¿å·²ç¶“ç•«æ»¿ï¼Œä¸å…ˆæ“¦ä¹¾æ·¨å°±ç•«æ–°çš„<br>
          åªæœƒè®“é¡è‰²å †ç©ã€ç•«é¢è®Šé«’<br>
          çœ‰æ¯›ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œè‹¥èˆŠçœ‰é¡è‰²å¤ªæ·±ç›´æ¥å†åš<br>
          å®¹æ˜“åšé‡ã€ä¸è‡ªç„¶ã€æ²’æ¼¸å±¤<br><br>
          âœ¨å…ˆæ·¡è‰² â†’ å†è¨­è¨ˆ æ‰èƒ½æ‰“é€ å‡º<br>
          âœ” æ¼¸å±¤ä¹¾æ·¨<br>
          âœ” ç·šæ¢æŸ”å’Œ<br>
          âœ” çœŸæ­£è²¼åˆäº”å®˜çš„ç†æƒ³çœ‰å‹`
        },
        {
          q: 'ç„¡å‰µæ·¡è‰²ç‚ºä»€éº¼ä¸èƒ½ä¸€æ¬¡å®Œæˆï¼Ÿ',
          a: `çœ‰æ¯›ä¸­çš„è‰²ç´ åˆ†å¸ƒæ–¼çš®è†šçš„ä¸åŒå±¤æ¬¡<br>
          ç„¡å‰µæ·¡è‰²çš„åŸç†æ˜¯å°‡è‰²ç´ åˆ†è§£æˆè¼ƒå°çš„åˆ†å­<br>
          å†äº¤ç”±èº«é«”é€²è¡Œè‡ªç„¶ä»£è¬ï¼Œå› æ­¤éœ€è¦æ™‚é–“<br><br>
          åœ¨æ·¡è‰²éç¨‹ä¸­ï¼Œå¿…é ˆå…ˆæ·¡åŒ–è¼ƒæ·ºå±¤çš„è‰²ç´ <br>
          å¾…çš®è†šç©©å®šå¾Œï¼Œæ‰èƒ½é€æ­¥è™•ç†æ›´æ·±å±¤çš„è‰²ç´ <br><br>
          é€™æ¨£å¾ªåºé€²è¡Œï¼Œæ‰èƒ½åœ¨ä¸å‚·çš®è†šçš„å‰æä¸‹<br>
          è®“é¡è‰²å‡å‹»ã€è‡ªç„¶åœ°é€€æ·¡ï¼Œä¸¦ç‚ºå¾ŒçºŒéœ§çœ‰ä¿ç•™å¥åº·ã€ä¹¾æ·¨çš„åŸºåº•`
        }
      ];

      return `
        <div class="mb-8 fade-in">
          <h2 class="mb-8 text-center" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 400; letter-spacing: 2px;">
            æ·¡è‰²å¸¸è¦‹ Q&A
          </h2>
          <div class="space-y-5">
            ${faqs.map((faq, index) => `
              <div class="card p-7 rounded-3xl" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 3px 15px rgba(199, 162, 144, 0.1);">
                <div class="flex items-start gap-4 mb-4">
                  <span class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center" style="background: ${config.primary_action || defaultConfig.primary_action}; color: white; font-size: ${baseFont * 0.9}px; font-family: ${fontStack}; font-weight: 600;">
                    ${index + 1}
                  </span>
                  <h3 style="font-size: ${baseFont * 1.3}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; padding-top: 2px;">
                    ${faq.q}
                  </h3>
                </div>
                <div class="p-5 rounded-2xl" style="background: ${config.background_color || defaultConfig.background_color};">
                  <p style="font-size: ${baseFont * 0.98}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.9;">
                    ${faq.a}
                  </p>
                </div>
              </div>
            `).join('')}
          </div>

          <div class="card p-8 rounded-3xl text-center mt-6" style="background: linear-gradient(135deg, ${config.secondary_action || defaultConfig.secondary_action} 0%, ${config.card_background || defaultConfig.card_background} 100%); box-shadow: 0 4px 20px rgba(199, 162, 144, 0.15);">
            <h3 class="mb-4" style="font-size: ${baseFont * 1.5}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 500;">
              ğŸ’¡ æ·¡è‰²å‰å»ºè­°
            </h3>
            <p style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 2; opacity: 0.85; max-width: 800px; margin: 0 auto;">
              å»ºè­°æä¾›ç¾åœ¨çœ‰æ¯›çš„æ¸…æ™°ç…§ç‰‡ï¼Œè®“æˆ‘è©•ä¼°æœ€é©åˆçš„æ·¡è‰²æ–¹æ¡ˆ<br>
              æ¯å€‹äººçš„æƒ…æ³ä¸åŒï¼Œå°ˆæ¥­è©•ä¼°èƒ½ç¢ºä¿æœ€ä½³æ•ˆæœ
            </p>
          </div>
        </div>
      `;
    }

    function renderContact(config, currentTab = 'home') {
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const instagram = config.instagram_handle || defaultConfig.instagram_handle;
      const lineId = config.line_id || defaultConfig.line_id;

      return `
        <div class="flex flex-wrap gap-4 justify-center">
          <a href="https://www.instagram.com/beautybrow__studio" target="_blank" rel="noopener noreferrer" 
             class="card px-8 py-4 rounded-full flex items-center gap-3 transition-transform hover:scale-105"
             style="background: ${config.primary_action || defaultConfig.primary_action} !important; text-decoration: none; box-shadow: 0 4px 15px rgba(199, 162, 144, 0.3); border-radius: 9999px !important;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="white"/>
            </svg>
            <span style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: white; font-weight: 500;">
              beautybrow_studio
            </span>
          </a>
          <a href="https://lin.ee/p4qbS4j" target="_blank" rel="noopener noreferrer"
             onclick="navigator.clipboard.writeText('${lineId}').then(() => { 
               const btn = event.target.closest('a');
               const originalHTML = btn.innerHTML;
               btn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;"><path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.345 0 .63.285.63.63 0 .349-.285.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.058 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314" fill="white"/>
               </svg><span style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: white; font-weight: 500;\\'>å·²è¤‡è£½ LINE ID</span>';
               setTimeout(() => { btn.innerHTML = originalHTML; }, 2000);
             })"
             class="card px-8 py-4 rounded-full flex items-center gap-3 transition-transform hover:scale-105"
             style="background: ${config.primary_action || defaultConfig.primary_action} !important; text-decoration: none; box-shadow: 0 4px 15px rgba(199, 162, 144, 0.3); border-radius: 9999px !important;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.345 0 .63.285.63.63 0 .349-.285.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.058 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314" fill="white"/>
            </svg>
            <span style="font-size: ${baseFont * 1.05}px; font-family: ${fontStack}; color: white; font-weight: 500;">
              LINE: ${lineId}
            </span>
          </a>
          ${currentTab !== 'home' ? `
            <button onclick="switchTab('home')" 
                    class="px-10 py-4 rounded-full transition-all hover:scale-105"
                    style="background: ${config.secondary_action || defaultConfig.secondary_action}; 
                           color: ${config.primary_text || defaultConfig.primary_text}; 
                           font-size: ${baseFont * 1.05}px; 
                           font-family: ${fontStack}; 
                           font-weight: 500; 
                           border: none; 
                           cursor: pointer;
                           box-shadow: 0 3px 12px rgba(199, 162, 144, 0.2);
                           border-radius: 9999px !important;">
              ğŸ  è¿”å›é¦–é 
            </button>
          ` : ''}
        </div>
      `;
    }

    async function onConfigChange(config) {
      const app = document.getElementById('app');
      const baseFont = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const fontStack = `${customFont}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      // ä¿å­˜ç•¶å‰çš„ scroll ä½ç½®ï¼Œé¿å…é‡æ–°æ¸²æŸ“æ™‚é‡ç½®
      const savedScrollPosition = window.savedTabScrollPosition || 0;

      document.body.style.background = config.background_color || defaultConfig.background_color;

      let tabContent = '';
      switch (currentTab) {
        case 'home': tabContent = renderHome(config); break;
        case 'brow-guide': tabContent = renderBrowGuide(config); break;
        case 'pricing': tabContent = renderPricing(config); break;
        case 'booking': tabContent = renderBooking(config); break;
        case 'aftercare': tabContent = renderAftercare(config); break;
        case 'preparation': tabContent = renderPreparation(config); break;
        case 'location': tabContent = renderLocation(config); break;
        case 'faq-brow': tabContent = renderFAQBrow(config); break;
        case 'faq-removal': tabContent = renderFAQRemoval(config); break;
      }

      app.innerHTML = `
        <div class="w-full min-h-screen p-4 md:p-6">
          <div class="max-w-6xl mx-auto">
            <div class="mb-6 relative" style="--fade-color: ${config.card_background || defaultConfig.card_background};">
              <div class="scroll-fade-left hidden" id="scroll-fade-left"></div>
              <div class="scroll-fade-right" id="scroll-fade-right"></div>
              <div class="p-3 rounded-3xl scroll-container overflow-x-auto" id="tabs-scroll-container" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 24px rgba(199, 162, 144, 0.18);" onscroll="updateScrollFade(this)">
                <div class="flex gap-2 justify-start md:justify-center min-w-max md:min-w-0" id="tabs-container">
                ${tabs.map(tab => `
                  <button onclick="switchTab('${tab.id}')" 
                          id="tab-btn-${tab.id}"
                          class="tab-button px-5 py-3 rounded-2xl transition-all flex-shrink-0"
                          style="background: ${currentTab === tab.id ? (config.primary_action || defaultConfig.primary_action) : 'transparent'}; 
                                 color: ${currentTab === tab.id ? 'white' : (config.primary_text || defaultConfig.primary_text)}; 
                                 font-size: ${baseFont * 0.9}px; 
                                 font-family: ${fontStack}; 
                                 font-weight: 500; 
                                 border: none; 
                                 cursor: pointer;
                                 white-space: nowrap;">
                    <span style="margin-right: 6px;">${tab.icon}</span>${tab.name}
                  </button>
                `).join('')}
                </div>
              </div>
            </div>

            <div class="mb-8">
              ${tabContent}
            </div>

            <div class="card p-8 rounded-3xl text-center" style="background: ${config.card_background || defaultConfig.card_background}; box-shadow: 0 4px 20px rgba(199, 162, 144, 0.15);">
              <h3 class="mb-6" style="font-size: ${baseFont * 1.6}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; font-weight: 400; letter-spacing: 1px;">
                è¯ç¹«æˆ‘
              </h3>
              ${renderContact(config, currentTab)}
            </div>
          </div>
        </div>
      `;

      // æ¢å¾© scroll ä½ç½®ä¸¦åˆå§‹åŒ–é®ç½©ç‹€æ…‹
      // ä½¿ç”¨ requestAnimationFrame ç¢ºä¿ DOM å·²å®Œå…¨æ¸²æŸ“
      requestAnimationFrame(() => {
        const tabsContainer = document.getElementById('tabs-scroll-container');
        if (tabsContainer) {
          // å…ˆæ¢å¾©ä¹‹å‰ä¿å­˜çš„ scroll ä½ç½®ï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰
          if (savedScrollPosition !== undefined && savedScrollPosition !== null) {
            tabsContainer.scrollLeft = savedScrollPosition;
          }
          // æ›´æ–°é®ç½©ç‹€æ…‹
          updateScrollFade(tabsContainer);
        }

        // å¦‚æœæ˜¯æ–½ä½œå¾Œç…§è­·é é¢ï¼Œåˆå§‹åŒ–æŒ‰éˆ•ç‹€æ…‹
        if (currentTab === 'aftercare') {
          const hash = getTabFromUrl() || '';
          if (hash.startsWith('aftercare-')) {
            const subType = hash.replace('aftercare-', '');
            if (subType === 'brow' || subType === 'removal') {
              window.switchAftercareType(subType);
            } else {
              window.switchAftercareType('brow');
            }
          } else {
            window.switchAftercareType('brow');
          }
        }

        // å¦‚æœæ˜¯åƒ¹ç›®è¡¨é é¢ï¼Œåˆå§‹åŒ–æŒ‰éˆ•ç‹€æ…‹
        if (currentTab === 'pricing') {
          const hash = getTabFromUrl() || '';
          if (hash.startsWith('pricing-')) {
            const subType = hash.replace('pricing-', '');
            if (subType === 'brow' || subType === 'removal') {
              window.switchPricingType(subType);
            } else {
              window.switchPricingType('brow');
            }
          } else {
            window.switchPricingType('brow');
          }
        }
      });
    }

    // æ›´æ–°æ»¾å‹•é®ç½©é¡¯ç¤ºç‹€æ…‹
    window.updateScrollFade = function (container) {
      const fadeLeft = document.getElementById('scroll-fade-left');
      const fadeRight = document.getElementById('scroll-fade-right');
      if (!fadeLeft || !fadeRight || !container) return;

      const scrollLeft = container.scrollLeft;
      const scrollWidth = container.scrollWidth;
      const clientWidth = container.clientWidth;
      const isScrollable = scrollWidth > clientWidth;
      const isAtStart = scrollLeft <= 1;
      const isAtEnd = scrollLeft + clientWidth >= scrollWidth - 1;

      // å¦‚æœå¯æ»¾å‹•ï¼Œé¡¯ç¤ºå°æ‡‰çš„é®ç½©
      if (isScrollable) {
        fadeLeft.classList.toggle('hidden', isAtStart);
        fadeRight.classList.toggle('hidden', isAtEnd);
      } else {
        // å¦‚æœä¸å¯æ»¾å‹•ï¼Œéš±è—æ‰€æœ‰é®ç½©
        fadeLeft.classList.add('hidden');
        fadeRight.classList.add('hidden');
      }
    };

    window.switchTab = function (tabId) {
      if (!isValidTabId(tabId)) tabId = 'home';
      // åœ¨é‡æ–°æ¸²æŸ“å‰ä¿å­˜ç•¶å‰çš„ scroll ä½ç½®
      const tabsContainer = document.getElementById('tabs-scroll-container');
      if (tabsContainer) {
        window.savedTabScrollPosition = tabsContainer.scrollLeft;
      }

      currentTab = tabId;
      // æ›´æ–°ç¶²å€ï¼Œè®“åˆ†äº«é€£çµå¯ç›´æ¥æŒ‡å®š tab
      setUrlTab(tabId);
      const config = window.currentConfig || defaultConfig;
      onConfigChange(config);

      // æ¢å¾© scroll ä½ç½®å¾Œï¼Œæª¢æŸ¥æŒ‰éˆ•æ˜¯å¦éœ€è¦æ»¾å‹•ï¼ˆåªåœ¨å®Œå…¨ä¸å¯è¦‹æ™‚ï¼‰
      // ä½¿ç”¨é›™é‡ requestAnimationFrame ç¢ºä¿ scroll ä½ç½®å·²æ¢å¾©
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          const tabButton = document.getElementById(`tab-btn-${tabId}`);
          const tabsContainer = document.getElementById('tabs-scroll-container');
          if (tabButton && tabsContainer) {
            const containerRect = tabsContainer.getBoundingClientRect();
            const buttonRect = tabButton.getBoundingClientRect();

            // æª¢æŸ¥æŒ‰éˆ•æ˜¯å¦å®Œå…¨åœ¨å¯è¦‹å€åŸŸå…§
            const buttonLeft = buttonRect.left;
            const buttonRight = buttonRect.right;
            const containerLeft = containerRect.left;
            const containerRight = containerRect.right;
            const padding = 12; // è€ƒæ…®ä¸€äº›é‚Šè·

            // åªæœ‰ç•¶æŒ‰éˆ•å®Œå…¨ä¸å¯è¦‹æ™‚æ‰æ»¾å‹•
            const isCompletelyHidden = buttonRight < containerLeft + padding || buttonLeft > containerRight - padding;

            if (isCompletelyHidden) {
              // è¨ˆç®—éœ€è¦æ»¾å‹•çš„ä½ç½®ï¼ˆè®“æŒ‰éˆ•å±…ä¸­é¡¯ç¤ºï¼‰
              const buttonOffsetLeft = tabButton.offsetLeft;
              const buttonWidth = buttonRect.width;
              const containerWidth = tabsContainer.clientWidth;
              const targetScroll = buttonOffsetLeft - (containerWidth / 2) + (buttonWidth / 2);

              // ç¢ºä¿æ»¾å‹•ä½ç½®åœ¨æœ‰æ•ˆç¯„åœå…§
              const maxScroll = tabsContainer.scrollWidth - containerWidth;
              const finalScroll = Math.max(0, Math.min(targetScroll, maxScroll));

              // ç›´æ¥è¨­ç½® scrollLeftï¼Œé¿å…å‹•ç•«è·³å‹•
              tabsContainer.scrollLeft = finalScroll;
              // æ›´æ–°ä¿å­˜çš„ä½ç½®
              window.savedTabScrollPosition = finalScroll;
            }

            // æ›´æ–°é®ç½©ç‹€æ…‹
            updateScrollFade(tabsContainer);
          }
        });
      });
    };

    window.switchAftercareType = function (type) {
      const config = window.currentConfig || defaultConfig;
      const baseFont = config.font_size || defaultConfig.font_size;
      const fontStack = `${config.font_family || defaultConfig.font_family}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const browBtn = document.getElementById('aftercare-btn-brow');
      const removalBtn = document.getElementById('aftercare-btn-removal');
      const browContent = document.getElementById('aftercare-content-brow');
      const removalContent = document.getElementById('aftercare-content-removal');

      if (type === 'brow') {
        // åˆ‡æ›åˆ°éœ§çœ‰
        if (browBtn) {
          browBtn.style.background = config.primary_action || defaultConfig.primary_action;
          browBtn.style.color = 'white';
          browBtn.style.boxShadow = '0 4px 15px rgba(199, 162, 144, 0.3)';
        }
        if (removalBtn) {
          removalBtn.style.background = config.secondary_action || defaultConfig.secondary_action;
          removalBtn.style.color = config.primary_text || defaultConfig.primary_text;
          removalBtn.style.boxShadow = '0 3px 12px rgba(199, 162, 144, 0.2)';
        }
        if (browContent) browContent.style.display = 'block';
        if (removalContent) removalContent.style.display = 'none';
      } else if (type === 'removal') {
        // åˆ‡æ›åˆ°æ·¡è‰²
        if (browBtn) {
          browBtn.style.background = config.secondary_action || defaultConfig.secondary_action;
          browBtn.style.color = config.primary_text || defaultConfig.primary_text;
          browBtn.style.boxShadow = '0 3px 12px rgba(199, 162, 144, 0.2)';
        }
        if (removalBtn) {
          removalBtn.style.background = config.primary_action || defaultConfig.primary_action;
          removalBtn.style.color = 'white';
          removalBtn.style.boxShadow = '0 4px 15px rgba(199, 162, 144, 0.3)';
        }
        if (browContent) browContent.style.display = 'none';
        if (removalContent) removalContent.style.display = 'block';
      }
      // æ›´æ–°ç¶²å€ hash
      setUrlTab(`aftercare-${type}`);
    };

    window.switchPricingType = function (type) {
      const config = window.currentConfig || defaultConfig;
      const baseFont = config.font_size || defaultConfig.font_size;
      const fontStack = `${config.font_family || defaultConfig.font_family}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;

      const browBtn = document.getElementById('pricing-btn-brow');
      const removalBtn = document.getElementById('pricing-btn-removal');
      const browContent = document.getElementById('pricing-content-brow');
      const removalContent = document.getElementById('pricing-content-removal');

      if (type === 'brow') {
        // åˆ‡æ›åˆ°éœ§çœ‰
        if (browBtn) {
          browBtn.style.background = config.primary_action || defaultConfig.primary_action;
          browBtn.style.color = 'white';
          browBtn.style.boxShadow = '0 4px 15px rgba(199, 162, 144, 0.3)';
        }
        if (removalBtn) {
          removalBtn.style.background = config.secondary_action || defaultConfig.secondary_action;
          removalBtn.style.color = config.primary_text || defaultConfig.primary_text;
          removalBtn.style.boxShadow = '0 3px 12px rgba(199, 162, 144, 0.2)';
        }
        if (browContent) browContent.style.display = 'block';
        if (removalContent) removalContent.style.display = 'none';
      } else if (type === 'removal') {
        // åˆ‡æ›åˆ°æ·¡è‰²
        if (browBtn) {
          browBtn.style.background = config.secondary_action || defaultConfig.secondary_action;
          browBtn.style.color = config.primary_text || defaultConfig.primary_text;
          browBtn.style.boxShadow = '0 3px 12px rgba(199, 162, 144, 0.2)';
        }
        if (removalBtn) {
          removalBtn.style.background = config.primary_action || defaultConfig.primary_action;
          removalBtn.style.color = 'white';
          removalBtn.style.boxShadow = '0 4px 15px rgba(199, 162, 144, 0.3)';
        }
        if (browContent) browContent.style.display = 'none';
        if (removalContent) removalContent.style.display = 'block';
      }
      // æ›´æ–°ç¶²å€ hash
      setUrlTab(`pricing-${type}`);
    };

    // ä½¿ç”¨ defaultConfig åˆå§‹åŒ–é é¢
    window.currentConfig = { ...defaultConfig };

    // é é¢è¼‰å…¥å®Œæˆå¾Œè‡ªå‹•åˆå§‹åŒ–
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        // è®€å–ç¶²å€ hashï¼Œæ”¯æ´åˆ†äº«æŒ‡å®š tabï¼ˆå«å­ tabï¼‰
        const initialHash = getTabFromUrl();
        // è§£æåŸºæœ¬ tabï¼ˆä¾‹å¦‚ pricing-brow -> pricingï¼‰
        let baseTab = initialHash || '';
        if (initialHash && initialHash.includes('-')) {
          baseTab = initialHash.split('-')[0];
        }
        if (baseTab && isValidTabId(baseTab)) {
          currentTab = baseTab;
        } else {
          // æ²’å¸¶ hash æˆ–ä¸åˆæ³•æ™‚ï¼Œå›ºå®šæˆ homeï¼ˆä¸¦æŠŠç¶²å€æ•´ç†æˆ #homeï¼‰
          currentTab = 'home';
          setUrlTab('home', { replace: true });
        }
        onConfigChange(window.currentConfig);
        // ç›£è½è¦–çª—å¤§å°æ”¹è®Šï¼Œæ›´æ–°é®ç½©ç‹€æ…‹
        window.addEventListener('resize', () => {
          const tabsContainer = document.getElementById('tabs-scroll-container');
          if (tabsContainer) {
            updateScrollFade(tabsContainer);
          }
        });
      });
    } else {
      // è®€å–ç¶²å€ hashï¼Œæ”¯æ´åˆ†äº«æŒ‡å®š tabï¼ˆå«å­ tabï¼‰
      const initialHash = getTabFromUrl();
      // è§£æåŸºæœ¬ tabï¼ˆä¾‹å¦‚ pricing-brow -> pricingï¼‰
      let baseTab = initialHash || '';
      if (initialHash && initialHash.includes('-')) {
        baseTab = initialHash.split('-')[0];
      }
      if (baseTab && isValidTabId(baseTab)) {
        currentTab = baseTab;
      } else {
        currentTab = 'home';
        setUrlTab('home', { replace: true });
      }
      onConfigChange(window.currentConfig);
      // ç›£è½è¦–çª—å¤§å°æ”¹è®Šï¼Œæ›´æ–°é®ç½©ç‹€æ…‹
      window.addEventListener('resize', () => {
        const tabsContainer = document.getElementById('tabs-scroll-container');
        if (tabsContainer) {
          updateScrollFade(tabsContainer);
        }
      });
    }

    // æ”¯æ´ç€è¦½å™¨ä¸Šä¸€é /ä¸‹ä¸€é ï¼Œä»¥åŠæ‰‹å‹•ä¿®æ”¹ hashï¼ˆåŒæ­¥ tab å’Œå­ tabï¼‰
    function syncTabFromUrl() {
      const hashFromUrl = getTabFromUrl();
      // è§£æåŸºæœ¬ tabï¼ˆä¾‹å¦‚ pricing-brow -> pricingï¼‰
      let baseTab = hashFromUrl || '';
      let subType = null;
      if (hashFromUrl && hashFromUrl.includes('-')) {
        const parts = hashFromUrl.split('-');
        baseTab = parts[0];
        subType = parts[1];
      }
      const nextTab = (baseTab && isValidTabId(baseTab)) ? baseTab : 'home';
      if (nextTab !== currentTab) {
        currentTab = nextTab;
        onConfigChange(window.currentConfig || defaultConfig);
      } else if (subType) {
        // å¦‚æœåŸºæœ¬ tab æ²’è®Šï¼Œä½†å­ tab è®Šäº†ï¼Œç›´æ¥åˆ‡æ›å­ tab
        if (baseTab === 'pricing' && (subType === 'brow' || subType === 'removal')) {
          window.switchPricingType(subType);
        } else if (baseTab === 'aftercare' && (subType === 'brow' || subType === 'removal')) {
          window.switchAftercareType(subType);
        }
      }
    }

    window.addEventListener('popstate', syncTabFromUrl);
    window.addEventListener('hashchange', syncTabFromUrl);

    // è‡‰å‹æµ®å±¤æ§åˆ¶å‡½æ•¸
    window.openFaceModal = function(name, img, description, features, eyebrowStyle, tips) {
      const config = window.currentConfig || defaultConfig;
      const baseFont = config.font_size || defaultConfig.font_size;
      const fontStack = `${config.font_family || defaultConfig.font_family}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`;
      
      const modal = document.getElementById('faceModal');
      const modalBody = document.getElementById('faceModalBody');
      
      modalBody.innerHTML = `
        <div style="display: grid; grid-template-columns: 1fr; gap: 0;">
          <div style="position: relative; width: 100%; aspect-ratio: 4/5; overflow: hidden; border-radius: 24px 24px 0 0;">
            <img src="${img}" alt="${name}" style="width: 100%; height: 100%; object-fit: cover;">
            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 30px 24px 20px;">
              <h2 style="font-size: ${baseFont * 2}px; font-family: ${fontStack}; color: white; font-weight: 500; margin: 0; text-align: center;">
                ${name}
              </h2>
            </div>
          </div>
          <div class="modal-body-content" style="padding: 32px 28px;">
            <div style="margin-bottom: 24px;">
              <p style="font-size: ${baseFont * 1.1}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.9; opacity: 0.85; text-align: center;">
                ${description}
              </p>
            </div>
            
            <div class="info-section" style="background: ${config.background_color || defaultConfig.background_color}; padding: 20px; border-radius: 16px; margin-bottom: 20px; border-left: 4px solid ${config.primary_action || defaultConfig.primary_action};">
              <h4 style="font-size: ${baseFont * 1.2}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px;">
                <span>âœ¨</span> æ¨è–¦çœ‰å‹
              </h4>
              <p style="font-size: ${baseFont * 1.0}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.8; margin: 0; opacity: 0.85;">
                ${features}
              </p>
            </div>

            <div class="info-section" style="background: ${config.background_color || defaultConfig.background_color}; padding: 20px; border-radius: 16px; margin-bottom: 20px; border-left: 4px solid ${config.primary_action || defaultConfig.primary_action};">
              <h4 style="font-size: ${baseFont * 1.2}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px;">
                <span>ğŸ“</span> è¨­è¨ˆç¾å­¸
              </h4>
              <p style="font-size: ${baseFont * 1.0}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.9; margin: 0; opacity: 0.9;">
                ${eyebrowStyle}
              </p>
            </div>

            <div class="info-section" style="background: ${config.background_color || defaultConfig.background_color}; padding: 20px; border-radius: 16px; border-left: 4px solid ${config.primary_action || defaultConfig.primary_action};">
              <h4 style="font-size: ${baseFont * 1.2}px; font-family: ${fontStack}; color: ${config.primary_action || defaultConfig.primary_action}; font-weight: 500; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px;">
                <span>ğŸ’¡</span> è¨­è¨ˆå°å·§æ€
              </h4>
              <p style="font-size: ${baseFont * 1.0}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; line-height: 1.9; margin: 0; opacity: 0.85;">
                ${tips}
              </p>
            </div>

            <div style="margin-top: 28px; padding-top: 24px; border-top: 1px solid rgba(199, 162, 144, 0.2); text-align: center;">
              <p style="font-size: ${baseFont * 0.95}px; font-family: ${fontStack}; color: ${config.primary_text || defaultConfig.primary_text}; opacity: 0.7; line-height: 1.8; margin: 0;">
                ä»¥ä¸Šç‚ºä¸€èˆ¬å»ºè­°ï¼Œå¯¦éš›çœ‰å‹è¨­è¨ˆæœƒä¾ç…§æ‚¨çš„äº”å®˜æ¯”ä¾‹ã€çœ‰éª¨çµæ§‹èˆ‡å€‹äººé¢¨æ ¼é€²è¡Œå®¢è£½åŒ–èª¿æ•´ ğŸ’–
              </p>
            </div>
          </div>
        </div>
      `;
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    };

    window.closeFaceModal = function() {
      const modal = document.getElementById('faceModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    };

    // ESC éµé—œé–‰æµ®å±¤
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeFaceModal();
      }
    });
  </script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9a8d2f4865374a46',t:'MTc2NDg3MTAzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>